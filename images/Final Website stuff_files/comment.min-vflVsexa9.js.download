define(["require","exports","tslib","react","classnames","spectrum/tertiary_link","spectrum/tooltip","spectrum_comments/comment/separator","spectrum_comments/comment_avatar","spectrum_comments/comment_editor/comment_editor","spectrum_comments/comment_editor/components/post_bar","spectrum_comments/comment_editor/comment_renderer","prop-types"],function(e,t,n,o,a,r,i,c,s,m,l,d,p){"use strict";function u(e){var t=e.actions,n=e.active,a=e.comment,c=e.localization,s=a.revisionInfo,m=a.threadId,l=function(){return t.onClickOlderInfo(s,m)},d=s.timestamp?c.olderVersionLabel+" ("+c.niceDateWithMonthName(s.timestamp,!1)+")":c.olderVersionLabel;return n&&s.revision?o.createElement(i.Tooltip,{positioning:"above",tooltipContent:c.viewHistoryLabel},o.createElement(r.TertiaryLink,{className:"sc-comment-older-version",onClick:l},d)):o.createElement("div",{className:"sc-comment-older-version"},d)}function v(e){var t=e.comment,a=e.localization,r=e.showRevisionInfo,i=t.author,c=t.id,s=t.revisionInfo,m=t.threadId,l=t.timestamp;return o.createElement("div",{className:"sc-comment-info"},r&&!s.isCurrent&&c==m?o.createElement(u,n.__assign({},e)):null,o.createElement("div",{className:"sc-comment-author-timestamp"},o.createElement("span",{className:"sc-comment-author"},i.name.display),o.createElement("span",{className:"sc-comment-timestamp"},a.ago(l))))}function E(e){var t=e.comment,a=(e.localization,e.showRevisionInfo),r=t.id,i=t.revisionInfo,c=t.threadId;return a&&!i.isCurrent&&r==c?o.createElement("div",{className:"sc-comment-info"},o.createElement(u,n.__assign({},e))):null}function f(e){return e.active?o.createElement(v,n.__assign({},e)):o.createElement(E,n.__assign({},e))}function h(){return o.createElement("span",{className:"sc-comment-actions-separator"},"â€¢")}function _(e){var t=e.comment,n=e.actions.onDeleted,a=e.isMobile,i=e.active,c=e.onStartEdit,s=e.localization,m=t.userPermissions,l=m.canEdit,d=m.canDelete;return!l&&!d||a||!i?null:o.createElement("div",{className:"sc-comment-actions"},l&&o.createElement(r.TertiaryLink,{onClick:function(){return c(t)}},s.commentEditLabel),l&&d&&o.createElement(h,null),d&&o.createElement(r.TertiaryLink,{className:"sc-comment-actions-delete",onClick:n},s.commentDeleteLabel))}Object.defineProperty(t,"__esModule",{value:!0}),t.InlineCommentEditorPostBar=function(e,t){var a=t.localization;return o.createElement(l.PostBar,n.__assign({},e,{postLabel:a.editPostLabel,cancelLabel:a.editCancelLabel}))},t.InlineCommentEditorPostBar.contextTypes={localization:p.object},t.OlderInfo=u,t.ActiveCommentInfo=v,t.InactiveCommentInfo=E,t.CommentInfo=f,t.CommentActionMenu=_;var y=(function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSave=function(e){t.props.actions.onEdited(e),t.props.onEndEdit()},t.onMentionsQueryUpdated=t.props.actions.onMentionsQueryUpdated,t}return n.__extends(r,e),r.prototype.classNameUtil=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.props,o=n.active,r=void 0!==o&&o,i=n.className,c=n.comment.deleted;return a.apply(void 0,[i].concat(e,[{"sc-comment-active":r,"sc-comment-deleted":c}]))},Object.defineProperty(r.prototype,"localization",{get:function(){return this.context.localization},enumerable:!0,configurable:!0}),r.prototype.renderDeletedMode=function(){var e=this.props.children;return o.createElement("li",{className:this.classNameUtil()},o.createElement("div",{className:"sc-comment-avatar"},o.createElement(s.DeletedCommentAvatar,null)),o.createElement("div",{className:"sc-comment-content-container"},o.createElement("div",{className:"sc-comment-content"},e,e&&o.createElement(c.Separator,null),o.createElement("span",{className:"sc-comment-text"},this.localization.commentDeletedMsg))))},r.prototype.renderDisplayMode=function(){var e=this,t=this.localization,a=this.props,r=(a.active,a.comment),i=a.commentAvatarComponent,c=r.content,s=r.author,m=r.revisionInfo;r.timestamp;return o.createElement("li",{className:this.classNameUtil("sc-comment-renderer")},o.createElement(d.CommentRenderer,{content:c,author:s,commentAvatarComponent:i,annotation:this.props.children,revisionInfo:m},function(a){return o.createElement("div",null,o.createElement(f,n.__assign({},e.props,{localization:t})),a,o.createElement(_,n.__assign({},e.props,{localization:t})))}))},r.prototype.renderEditMode=function(){var e=this.props,n=e.comment,a=e.mentionsMatches,r=e.onEndEdit;return o.createElement("li",{className:this.classNameUtil("sc-comment-editor","sc-comment-inline-editor")},o.createElement(m.CommentEditor,{author:n.author,content:n.content,postSignalComponent:t.InlineCommentEditorPostBar,onCancel:r,onPost:this.onSave,mentionsMatches:a,onMentionsQueryUpdated:this.onMentionsQueryUpdated,renderBare:!0}))},r.prototype.render=function(){return this.props.comment.deleted?this.renderDeletedMode():this.props.isEditing?this.renderEditMode():this.renderDisplayMode()},r.contextTypes={localization:p.object},r.defaultProps={isEditing:!1},r})(o.PureComponent);t.Comment=y});
//# sourceMappingURL=comment.min.js-vflTvz0Dr.map