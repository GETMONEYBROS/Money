define("file-viewer/assets-metaserver",["require","exports","modules/clean/static_urls"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assets={"2NQat":i.static_url("/static/js/file-viewer/img/error/unavailable_1x-vflG2AHMd.png"),"1M0Da":i.static_url("/static/js/file-viewer/img/error/unavailable_2x-vflGPrE5d.png"),"3_SVR":i.static_url("/static/js/file-viewer/img/error/file_too_large_1x-vflDGNPuo.png"),"1KZOf":i.static_url("/static/js/file-viewer/img/error/file_too_large_2x-vfl-r0UPt.png"),d7hcI:i.static_url("/static/js/file-viewer/img/error/file_uploading_1x-vflRuLSg0.png"),"1WylU":i.static_url("/static/js/file-viewer/img/error/file_uploading_2x-vflKOdrWj.png"),"1j0Ik":i.static_url("/static/js/file-viewer/img/error/filetype_not_supported_1x-vflmIVODZ.png"),"3afH2":i.static_url("/static/js/file-viewer/img/error/filetype_not_supported_2x-vflE8HW8X.png"),"32YjM":i.static_url("/static/js/file-viewer/img/error/password_protected_1x-vflnFAKjt.png"),"29R06":i.static_url("/static/js/file-viewer/img/error/password_protected_2x-vflnBXZ1k.png")}}),define("file-viewer/core/bootstrap",["require","exports","tslib","redux","file-viewer/core/data/reducer","file-viewer/core/data/actions","file-viewer/core/urls","file-viewer/core/uuid","file-viewer/core/middlewares/preview_data","file-viewer/core/middlewares/riviera_data","file-viewer/core/utils","file-viewer/core/config","file-viewer/core/middlewares/analytics","file-viewer/core/logging/actions","file-viewer/core/extension_constants","file-viewer/core/middlewares/ui_action_redispatcher"],function(e,t,i,r,a,n,o,s,l,c,d,u,p,f,v,_){"use strict";function m(e){var t=s.v4(),r=e.store,a=e.intl,l=e.config,c=e.resolveAsset;return r.dispatch(n.initializeFileViewerUi(t)),{id:t,getPlatformProps:function(){return{intl:a,store:r,config:l,resolveAsset:c,accountId:e.accountId,deviceType:e.deviceType}},setCurrentFileIdOrRevisionId:function(e){r.dispatch(n.setCurrentFilePreview({fileViewerId:t,fileIdOrRevisionId:e}))},loadFilePreview:function(a){return i.__awaiter(this,void 0,void 0,function(){var s,l,c,u,p;return i.__generator(this,function(i){return s=a.fileId,l=a.fileName,c=a.sourceSession,u=d.getFileExtension(l),p=v.resolvePreviewType(u),r.dispatch(n.initializeFilePreview({fileViewerId:t,fileIdOrRevisionId:s,deviceType:e.deviceType||"desktop",fileExtension:u,sourceSession:c})),r.dispatch(f.logEvent({event:"preview_attempted",fileViewerId:t})),"other"===p?[2,r.dispatch(f.logEvent({event:"support_denied",fileViewerId:t}))]:(r.dispatch(f.logEvent({event:"support_confirmed",fileViewerId:t})),r.dispatch(f.logEvent({event:"download_attempted",fileViewerId:t})),[2,r.dispatch(n.fetchFileByFileIdAction({fileIdOrRevisionId:s,accountId:e.accountId})).then(function(){var e=r.getState().previewData[s];if(!e||!e.content)throw new Error("Failed to fetch preview data");var t=[];switch(e.content[".tag"]){case"ssr_doc":var i=e.content,a=i.text_url_tmpl,l=i.image_url_tmpl;t.push(r.dispatch(n.fetchDocMetadataAction(s,a))),r.dispatch(n.fetchDataForPageAction(s,a,0,50)),r.dispatch(n.prewarmUnifiedPreviewAsset(o.imageUrl(l,{page:0,scale_percent:0})))}return Promise.all(t)}).then(function(){return r.dispatch(f.logEvent({event:"download_succeeded",fileViewerId:t}))},function(){return r.dispatch(f.logEvent({event:"download_failed",fileViewerId:t}))})])})})}}}function w(e){var t=e.additionalMiddlewares,n=void 0===t?[]:t,o=e.initialState,s=e.additionalReducers,f=void 0===s?{}:s,v=e.assets,w=e.intl,g=e.logger,h=[c.rivieraDataMiddleware(e.rivieraIOClient),l.previewsDataMiddleware(e.apiv2ClientBase.ns("previews"),void 0),_.uiActionRedispatcher].concat(n,g?[p.analyticsMiddleware(g)]:[]),y="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?r.compose(r.applyMiddleware.apply(void 0,h),window.__REDUX_DEVTOOLS_EXTENSION__()):r.applyMiddleware.apply(void 0,h),b=i.__assign({},a.reducers,f),P=r.createStore(r.combineReducers(b),o,y),S=u.DEFAULT_CONFIG;return e.config&&(S=i.__assign({},S,e.config)),{createFileViewer:function(){return m({intl:w,store:P,config:S,resolveAsset:d.resolveAsset.bind(null,v),accountId:e.accountId,deviceType:e.deviceType})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.createFileViewerSDK=w}),define("file-viewer/core/config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG={pdf_size_limit:524288e3,ppt_size_limit:301989888,word_doc_size_limit:167772160,archive_size_limit:1073741824,text_size_limit:8388608,linkfile_size_limit:10240,load_image_only:!1}}),define("file-viewer/core/data/actions",["require","exports"],function(e,t){"use strict";function i(e,t,i,r){return{payload:{fileIdOrRevisionId:e,textUrlTmpl:t,pageLowerBound:i,pageUpperBound:r},type:"@@previews/fetchDataForPage"}}function r(e,t,i){return{payload:{fileIdOrRevisionId:e,data:t},type:"@@previews/fetchDataForPageResult",error:i}}function a(e,t){return{payload:{fileIdOrRevisionId:e,textUrlTmpl:t},type:"@@previews/fetchDocMetadata"}}function n(e,t,i){return{type:"@@previews/fetchDocMetadataResult",payload:{fileIdOrRevisionId:e,data:t},error:i}}function o(e){return{payload:e,type:"@@previews/fetchFileByFileIdSuccess"}}function s(e){return{type:"@@previews/fetchFileByFileId",payload:e}}function l(e){return{payload:e,type:"@@previews/fetchFileMetadataByFileIdSuccess"}}function c(e){return{payload:e,type:"@@previews/fetchFileMetadataByFileId"}}function d(e){return{payload:e,type:"@@previews/refreshBlob"}}function u(e){return{payload:e,type:"@@previews/refreshBlobSuccess"}}function p(e){return{type:"@@previews/fetchUnifiedPreviewAsset",payload:{assetUrl:e}}}function f(e){return{type:"@@previews/updateDocCurrentPageIndex",payload:e}}function v(e){return{type:"@@previews/zoomIn",payload:e}}function _(e){return{type:"@@previews/zoomOut",payload:e}}function m(e){return{type:"@@previews/updateMinScaleFactor",payload:e}}function w(e){return{type:"@@previews/zoomOriginalOrFit",payload:e}}function g(e){return{type:"@@previews/fileViewerUi/initialize",payload:{fileViewerId:e}}}function h(e){return{type:"@@previews/initializeFilePreview",payload:e}}function y(e){return{type:"@@previews/fileViewerUi/openSidebar",payload:e}}function b(e){return{type:"@@previews/fileViewerUi/closeSidebar",payload:e}}function P(e){return{type:"@@previews/fileViewerUi/openDocSidebar",payload:e}}function S(e){return{type:"@@previews/fileViewerUi/closeDocSidebar",payload:e}}function F(e){return{type:"@@previews/setCurrentFilePreview",payload:e}}function E(e){return{type:"@@previews/updateScaleFactor",payload:e}}function I(e){return{type:"@@previews/pageDown",payload:e}}function x(e){return{type:"@@previews/pageUp",payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.PrewarmUnifiedPreviewAsset="@@previews/fetchUnifiedPreviewAsset",e.FetchDataForPage="@@previews/fetchDataForPage",e.FetchDataForPageResult="@@previews/fetchDataForPageResult",e.FetchDocMetadata="@@previews/fetchDocMetadata",e.FetchDocMetadataResult="@@previews/fetchDocMetadataResult",e.FetchFileByFileId="@@previews/fetchFileByFileId",e.FetchFileByFileIdSuccess="@@previews/fetchFileByFileIdSuccess",e.FetchFileMetadataByFileId="@@previews/fetchFileMetadataByFileId",e.FetchFileMetadataByFileIdSuccess="@@previews/fetchFileMetadataByFileIdSuccess",e.RefreshBlob="@@previews/refreshBlob",e.RefreshBlobSuccess="@@previews/refreshBlobSuccess",e.FetchPhotoMetadataResult="@@previews/fetchPhotoMetadataResult",e.UpdateDocCurrentPageIndex="@@previews/updateDocCurrentPageIndex",e.PageDown="@@previews/pageDown",e.PageUp="@@previews/pageUp",e.UpdateMinScaleFactor="@@previews/updateMinScaleFactor",e.ZoomIn="@@previews/zoomIn",e.ZoomOut="@@previews/zoomOut",e.ZoomOriginalOrFit="@@previews/zoomOriginalOrFit",e.UpdateScaleFactor="@@previews/updateScaleFactor",e.InitializeFileViewerUi="@@previews/fileViewerUi/initialize",e.InitializeFilePreview="@@previews/initializeFilePreview",e.OpenSidebar="@@previews/fileViewerUi/openSidebar",e.CloseSidebar="@@previews/fileViewerUi/closeSidebar",e.OpenDocSidebar="@@previews/fileViewerUi/openDocSidebar",e.CloseDocSidebar="@@previews/fileViewerUi/closeDocSidebar",e.SetCurrentFilePreview="@@previews/setCurrentFilePreview"})(t.Action||(t.Action={})),t.fetchDataForPageAction=i,t.fetchDataForPageResultAction=r,t.fetchDocMetadataAction=a,t.fetchDocMetadataResultAction=n,t.fetchFileByFileIdSuccessAction=o,t.fetchFileByFileIdAction=s,t.fetchFileMetadataByFileIdSuccessAction=l,t.fetchFileMetadataByFileIdAction=c,t.refreshBlobAction=d,t.refreshBlobSuccessAction=u,t.prewarmUnifiedPreviewAsset=p,t.updateDocCurrentPageIndex=f,t.zoomIn=v,t.zoomOut=_,t.updateMinScaleFactor=m,t.zoomOriginalOrFit=w,t.initializeFileViewerUi=g,t.initializeFilePreview=h,t.openSidebar=y,t.closeSidebar=b,t.openDocSidebar=P,t.closeDocSidebar=S,t.setCurrentFilePreview=F,t.updateScaleFactor=E,t.pageDown=I,t.pageUp=x}),define("file-viewer/core/data/models",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.Archive="archive",e.Audio="audio",e.CloudDoc="cloud_doc",e.Excel="excel",e.HTML="html",e.Image="image",e.Linkfile="linkfile",e.Other="other",e.SsrDoc="ssr_doc",e.RawHTML="raw_html",e.Restricted="restricted",e.Video="video",e.Doc="doc",e.Photo="photo",e.Text="text"})(t.PreviewType||(t.PreviewType={}))}),define("file-viewer/core/data/reducer",["require","exports","tslib","file-viewer/core/extension_constants","file-viewer/core/logging/session","file-viewer/core/uuid"],function(e,t,i,r,a,n){"use strict";function o(e,t,i){if(1===t||!e)return 1;var r=.05*Math.round(e*t/.05);return Math.abs(r-e)<.05&&(r+=t>1?.05:-.05),Math.min(Math.max(r,i),16)}function s(e,t){return Math.max(Math.min(e*t,10),.1)}Object.defineProperty(t,"__esModule",{value:!0});t.DEFAULT_STATE={previewData:{},fileMetadata:{},rivieraData:{},fileViewerUi:{},currentFilePreviewId:{},loggingSession:{}},t.DEFAULT_FILE_PREVIEW_UI={isDocSidebarOpen:!1,scaleFactor:void 0,minScaleFactor:0,currentPageIndex:0,isSidebarOpen:!1};var l=function(e,r){void 0===e&&(e=t.DEFAULT_STATE.previewData);var a,n;switch(r.type){case"@@previews/initializeFilePreview":return e[r.payload.fileIdOrRevisionId]?e:i.__assign({},e,(a={},a[r.payload.fileIdOrRevisionId]={},a));case"@@previews/fetchFileByFileIdSuccess":if(!r.payload)return e;var o=r.payload.preview_data;return i.__assign({},e,o.reduce(function(e,t){return t.preview&&(e[t.file_id]=t.preview),e},{}));case"@@previews/refreshBlobSuccess":if(!r.payload)return e;var s=r.payload,l=s.fileIdOrRevisionId,c=s.preview,d=e[l]?e[l].content:{};return i.__assign({},e,(n={},n[l]=i.__assign({},e[l],{content:i.__assign({},d,c)}),n))}return e},c=function(e,r){void 0===e&&(e=t.DEFAULT_STATE.fileMetadata);var a;if(!r.payload)return e;switch(r.type){case"@@previews/initializeFilePreview":return e[r.payload.fileIdOrRevisionId]?e:i.__assign({},e,(a={},a[r.payload.fileIdOrRevisionId]={file_id:r.payload.fileIdOrRevisionId,file_name:""},a));case"@@previews/fetchFileMetadataByFileIdSuccess":var n=r.payload.file_metadata;return i.__assign({},e,n.reduce(function(e,t){return t&&t.file_id&&(e[t.file_id]=t),e},{}))}return e};t.DEFAULT_DOC_PREVIEW_METADATA={metadata:{page_count:0,dimensions:[[0,0,0]]},pages:[]};var d=function(e,r){void 0===e&&(e=t.DEFAULT_STATE.rivieraData);var a,n,o,s,l,c=r.payload,d=r.error;if(!c)return e;var u=c.fileIdOrRevisionId;switch(r.type){case"@@previews/initializeFilePreview":return e[r.payload.fileIdOrRevisionId]?e:i.__assign({},e,(a={},a[r.payload.fileIdOrRevisionId]={},a));case"@@previews/fetchPhotoMetadataResult":return i.__assign({},e,(n={},n[u]={originalWidth:r.payload.originalWidth,originalHeight:r.payload.originalHeight},n));case"@@previews/fetchDocMetadataResult":return!r.payload.data||d?i.__assign({},e,(o={},o[u]=i.__assign({},t.DEFAULT_DOC_PREVIEW_METADATA,{error:r.error}),o)):i.__assign({},e,(s={},s[u]=r.payload.data,s));case"@@previews/fetchDataForPageResult":var p=e[u]||t.DEFAULT_DOC_PREVIEW_METADATA,f=p.metadata,v=p.pages;if(r.payload.data){var _=r.payload.data,m=_.metadata,w=_.pages,g=f;m&&(g=i.__assign({},f,m));var h=v||new Array(g.page_count);return Array.isArray(w)&&w.length&&(h=h.slice(),w.forEach(function(e){return h[e.pageIndex]=e})),i.__assign({},e,(l={},l[u]={metadata:g,pages:h},l))}}return e},u=function(e,a){void 0===e&&(e=t.DEFAULT_STATE.fileViewerUi);var n,l,c,d,u,p,f,v,_,m,w,g,h,y,b,P,S,F,E,I,x,D,A,O,T;if(!a.payload)return e;if("@@previews/fileViewerUi/initialize"===a.type)return i.__assign({},e,(n={},n[a.payload.fileViewerId]={},n));var R=a.payload,C=R.fileViewerId,M=R.fileIdOrRevisionId,V=e[C]||{},k=V[M]||{},U=k.scaleFactor,L=void 0===U?1:U;switch(a.type){case"@@previews/initializeFilePreview":return i.__assign({},e,(l={},l[C]=i.__assign({},V,(c={},c[M]=i.__assign({},k,{isDocSidebarOpen:r.PRESENTATION_EXTS.includes(a.payload.fileExtension),scaleFactor:void 0,minScaleFactor:0,currentPageIndex:0,isSidebarOpen:!1}),c)),l));case"@@previews/updateDocCurrentPageIndex":return i.__assign({},e,(d={},d[C]=i.__assign({},V,(u={},u[M]=i.__assign({},k,{currentPageIndex:a.payload.pageIndex}),u)),d));case"@@previews/pageUp":return i.__assign({},e,(p={},p[C]=i.__assign({},V,(f={},f[M]=i.__assign({},k,{currentPageIndex:Math.max(k.currentPageIndex-1,0)}),f)),p));case"@@previews/pageDown":return i.__assign({},e,(v={},v[C]=i.__assign({},V,(_={},_[M]=i.__assign({},k,{currentPageIndex:Math.min(k.currentPageIndex+1,a.payload.pageCount||1)}),_)),v));case"@@previews/zoomIn":return i.__assign({},e,(m={},m[C]=i.__assign({},V,(w={},w[M]=i.__assign({},k,{scaleFactor:"ssr_doc"===a.payload.previewType?s(L,1.1):o(L||k.minScaleFactor,1.25,k.minScaleFactor)}),w)),m));case"@@previews/zoomOut":return i.__assign({},e,(g={},g[C]=i.__assign({},V,(h={},h[M]=i.__assign({},k,{scaleFactor:"ssr_doc"===a.payload.previewType?s(L,1/1.1):o(L||k.minScaleFactor,.8,k.minScaleFactor)}),h)),g));case"@@previews/zoomOriginalOrFit":return i.__assign({},e,(y={},y[C]=i.__assign({},V,(b={},b[M]=i.__assign({},k,{scaleFactor:L===k.minScaleFactor?1:k.minScaleFactor}),b)),y));case"@@previews/updateMinScaleFactor":return i.__assign({},e,(P={},P[C]=i.__assign({},V,(S={},S[M]=i.__assign({},k,{minScaleFactor:a.payload.minScaleFactor}),S)),P));case"@@previews/fileViewerUi/openSidebar":return i.__assign({},e,(F={},F[C]=i.__assign({},V,(E={},E[M]=i.__assign({},k,{isSidebarOpen:!0}),E)),F));case"@@previews/fileViewerUi/closeSidebar":return i.__assign({},e,(I={},I[C]=i.__assign({},V,(x={},x[M]=i.__assign({},k,{isSidebarOpen:!1}),x)),I));case"@@previews/fileViewerUi/openDocSidebar":return i.__assign({},e,(D={},D[C]=i.__assign({},V,(A={},A[M]=i.__assign({},k,{isDocSidebarOpen:!0}),A)),D));case"@@previews/fileViewerUi/closeDocSidebar":return i.__assign({},e,(O={},O[C]=i.__assign({},V,(T={},T[M]=i.__assign({},k,{isDocSidebarOpen:!1}),T)),O))}return e};t.loggingSessionReducer=function(e,r){void 0===e&&(e=t.DEFAULT_STATE.loggingSession);var o,s;if("@@previews/initializeFilePreview"===r.type){var l=r.payload,c=l.fileViewerId,d=l.sourceSession;return i.__assign({},e,(o={},o[c]=a.createFilePreviewSession({file_viewer_session_id:r.payload.fileViewerId,file_preview_session_id:n.v4(),file_id:r.payload.fileIdOrRevisionId,device_type:r.payload.deviceType,file_extension:r.payload.fileExtension,extra:d}),o))}return"@@previews/updateSession"===r.type?i.__assign({},e,(s={},s[r.payload.file_viewer_session_id]=r.payload,s)):e},t.currentFilePreviewIdReducer=function(e,r){void 0===e&&(e=t.DEFAULT_STATE.currentFilePreviewId);var a;return"@@previews/setCurrentFilePreview"!==r.type?e:i.__assign({},e,(a={},a[r.payload.fileViewerId]=r.payload.fileIdOrRevisionId,a))},t.reducers={previewData:l,fileMetadata:c,rivieraData:d,fileViewerUi:u,loggingSession:t.loggingSessionReducer,currentFilePreviewId:t.currentFilePreviewIdReducer}}),define("file-viewer/core/data/riviera/api",["require","exports","tslib"],function(e,t,i){"use strict";function r(e,t,i){return 401===e&&i?new n("Password required",12):new n("Load Error",t.rivieraStatusCode)}function a(e,t,i,r,a){void 0===i&&(i=0),void 0===r&&(r=50),void 0===a&&(a=!1);var n=new URL(e);return t&&n.searchParams.set("metadata","1"),void 0!==i&&(n.searchParams.set("text","1"),n.searchParams.set("page_start",i.toString()),n.searchParams.set("page_end",r.toString())),a&&n.searchParams.set("canned_file_name","spdf/audi.pdf.json"),n.toString()}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e){function t(t,i){void 0===i&&(i=0);var r=e.call(this,t)||this;return r.statusCode=i,r}return i.__extends(t,e),t})(Error);t.RivieraError=n;var o=function(e){var t={};try{e&&(t=JSON.parse(e))}catch(e){}return t};t.textUrl=a;var s=(function(){function e(){}return e.prototype.refreshDocBlob=function(e,t){return i.__awaiter(this,void 0,void 0,function(){var r,a,n;return i.__generator(this,function(i){switch(i.label){case 0:return r=t?{password:t}:{},[4,fetch(e,{headers:{"content-type":"application/json"},body:JSON.stringify(r),credentials:"include",method:"POST"})];case 1:return a=i.sent(),[4,a.json()];case 2:return n=i.sent(),[2,{ok:a.ok,status:a.status,data:n,headers:{"x-dropbox-metadata":a.headers.get("x-dropbox-metadata"),"x-dropbox-pdf-password-needed":a.headers.get("x-dropbox-pdf-password-needed")}}]}})})},e.prototype.fetchDocMetadata=function(e,t,r,n,o){return i.__awaiter(this,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return[4,fetch(a(e,t,r,n,o),{headers:{"content-type":"application/json"},credentials:"include",method:"POST"})];case 1:return s=i.sent(),[4,s.json()];case 2:return l=i.sent(),[2,{ok:s.ok,status:s.status,data:l,headers:{"x-dropbox-metadata":s.headers.get("x-dropbox-metadata"),"x-dropbox-pdf-password-needed":s.headers.get("x-dropbox-pdf-password-needed")}}]}})})},e})();t.WebRivieraIOClient=s;var l=(function(){function e(e){this.ioClient=e}return e.prototype.refreshDocBlob=function(e,t){return i.__awaiter(this,void 0,void 0,function(){var a,n,s,l,c,d,u,p,f,v;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this.ioClient.refreshDocBlob(e,t)];case 1:if(a=i.sent(),n=a.data,s=a.status,l=a.ok,c=a.headers,!l)throw d="1"===c["x-dropbox-pdf-password-needed"],u=o(c["x-dropbox-metadata"]),r(s,u,d);return p=n.text,f=n.image,v=n.refresh,[2,{text_url_tmpl:p,image_url_tmpl:f,refresh_url:v}]}})})},e.prototype.fetchDocMetadata=function(e,t,a,n,s){return void 0===t&&(t=!1),void 0===a&&(a=0),void 0===n&&(n=50),void 0===s&&(s=!1),i.__awaiter(this,void 0,void 0,function(){var l,c,d,u,p,f,v;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this.ioClient.fetchDocMetadata(e,t,a,n,s)];case 1:if(l=i.sent(),c=l.ok,d=l.data,u=l.status,p=l.headers,c)return[2,d];throw f="1"===p["x-dropbox-pdf-password-needed"],v=o(p["x-dropbox-metadata"]),r(u,v,f)}})})},e})();t.RivieraClientBase=l}),define("file-viewer/core/data/riviera",["require","exports","file-viewer/core/data/riviera/api","file-viewer/core/data/riviera/transform","file-viewer/core/data/riviera/types"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RivieraError=i.RivieraError,t.RivieraClientBase=i.RivieraClientBase,t.WebRivieraIOClient=i.WebRivieraIOClient,t.processTextResponse=r.processTextResponse,t.RivieraStatus=a.RivieraStatus}),define("file-viewer/core/data/riviera/transform",["require","exports","tslib","file-viewer/core/urls"],function(e,t,i,r){"use strict";function a(e){var t=e.n.lastIndexOf(",");return{fontFamily:'"'+(t>-1?e.n.substr(0,t):e.n)+'", '+(1&e.f?"monospace":"serif"),isBold:(e.f&1<<18)>0,isItalic:(64&e.f)>0}}function n(e,t,n){var o=t.text,s=t.metadata||n;if(!o||!o.pages||!s)return{metadata:void 0,pages:[]};var l=o.links,c=o.pages,d=(o.fonts||[]).reduce(function(e,t){return e[t.f]=a(t),e},{}),u=s.dimensions.reduce(function(e,t){for(var i=t[0],r=t[1],a=t[2],n=0;n<a;n++)e.push([i,r]);return e},[]);return{metadata:t.metadata,pages:Object.keys(c).map(function(t){var a=c[t]||[],n=a.map(function(e){return i.__assign({},e,{font:d[e.f]})}),o=+t;return{pageIndex:o,dimension:u[o],thumbnailUrl:r.imageUrl(e,{page:o,scale_percent:0}),imgUrls:{"1x":r.imageUrl(e,{page:o,scale_percent:0}),"4x":r.imageUrl(e,{page:o,scale_percent:400})},textboxes:n,links:l&&l[o]||[]}})}}Object.defineProperty(t,"__esModule",{value:!0});t.processTextResponse=n}),define("file-viewer/core/data/riviera/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.Unknown=0]="Unknown",e[e.OK=1]="OK",e[e.ConversionFailure=2]="ConversionFailure",e[e.TemporaryFailure=3]="TemporaryFailure",e[e.InternalFailure=4]="InternalFailure",e[e.UnsupportedFormat=5]="UnsupportedFormat",e[e.Timeout=6]="Timeout",e[e.TooBig=7]="TooBig",e[e.InvalidMetadata=8]="InvalidMetadata",e[e.SourceCorrupt=9]="SourceCorrupt",e[e.TimeBudgetExceeded=10]="TimeBudgetExceeded",e[e.NotFound=11]="NotFound",e[e.PasswordProtected=12]="PasswordProtected",e[e.InvalidRequest=13]="InvalidRequest",e[e.VirusDetected=14]="VirusDetected",e[e.BlockMissing=15]="BlockMissing"})(t.RivieraStatus||(t.RivieraStatus={}))}),define("file-viewer/core/extension_constants",["require","exports"],function(e,t){"use strict";function i(e){return e=e.toLowerCase(),t.DOC_EXTS.includes(e)?"ssr_doc":t.PHOTO_EXTS.includes(e)?"image":m.includes(e)?"video":w.includes(e)?"audio":y.includes(e)?"linkfile":_.includes(e)?"html":"other"}Object.defineProperty(t,"__esModule",{value:!0});var r=[".odt",".wpd"],a=[".odp"],n=[".doc",".docx",".docm",".rtf"],o=[".ppt",".pps",".ppsx",".ppsm",".pptx",".pptm"],s=[".pdf"],l=[".ai",".eps"];t.PHOTO_EXTS=[".bmp",".gif",".jpeg",".jpg",".png",".tif",".tiff",".wbmp",".webp"];var c=[".key",".keynote"],d=[".dwg"],u=[".as",".as3",".asm",".aspx",".bat",".c",".cc",".cmake",".coffee",".cpp",".cs",".css",".cxx",".diff",".erb",".erl",".groovy",".gry",".h",".haml",".hh",".hpp",".hxx",".java",".js",".json",".jsx",".less",".lst",".m",".make",".ml",".mm",".out",".patch",".php",".pl",".plist",".properties",".py",".rb",".sass",".scala",".scm",".script",".scss",".sh",".sml",".sql",".tsx",".vb",".vi",".vim",".xml",".xsd",".xsl",".yaml",".yml"],p=[".epub"],f=[".markdown",".mdown",".mkdn",".md"],v=[".abap",".ada",".adp",".ahk",".asc",".ascx",".asp",".awk",".bash",".bash_login",".bash_logout",".bash_profile",".bashrc",".bib",".bsh",".build",".builder",".c++",".capfile",".cfc",".cfm",".cfml",".cl",".clj",".cls",".cmd",".cpt",".cpy",".cshtml",".cson",".csproj",".ctp",".d",".ddl",".di",".dif",".disco",".dml",".dtd",".dtml",".el",".emakefile",".f",".f90",".f95",".fs",".fsi",".fsscript",".fsx",".gemfile",".gemspec",".gitconfig",".go",".gvy",".h++",".handlebars",".hbs",".hcp",".hrl",".hs",".htc",".idl",".iim",".inc",".inf",".ini",".inl",".ipp",".irbrc",".jade",".jav",".jsp",".l",".lhs",".lisp",".log",".ltx",".lua",".markdn",".mli",".mll",".mly",".mud",".nfo",".opml",".osascript",".out",".p",".pas",".patch",".php2",".php3",".php4",".php5",".phtml",".pm",".pod",".pp",".profile",".ps1",".psd1",".psm1",".pt",".pyw",".r",".rake",".rbx",".rc",".re",".readme",".reg",".rest",".resw",".resx",".rhtml",".rjs",".rprofile",".rpy",".rss",".rst",".rxml",".s",".scm",".sconscript",".sconstruct",".sgml",".shtml",".sty",".swift",".tcl",".tex",".text",".textile",".tld",".tli",".tmpl",".tpl",".txt",".vim",".wsdl",".xhtml",".xoml",".xslt",".yaws",".zsh"],_=u.concat(p,f,v),m=[".3gp",".3gpp",".3gpp2",".asf",".avi",".dv",".flv",".m2t",".m4v",".mkv",".mov",".mp4",".mpeg",".mpg",".mts",".mxf",".oggtheora",".ogv",".rm",".ts",".vob",".webm",".wmv"],w=[".aac",".aif",".aiff",".m4a",".m4r",".mp3",".oga",".wav",".wma"],g=[".url",".website"],h=[".webloc"],y=g.concat(h);t.PRESENTATION_EXTS=o.concat(a),t.DOC_EXTS=s.concat(l,a,r,o,n,c,d),t.resolvePreviewType=i}),define("file-viewer/core/i18n",["require","exports","file-viewer/core/invariant"],function(e,t,i){"use strict";function r(e,t){var i=Array.isArray(e)?e.slice():[e];if(i.sort(),!t)return i.join("|");var r=Object.keys(t);return r.sort(),r.reduce(function(e,i){return e+"|"+i+"="+t[i]},i.join("|"))}function a(e,t){return function(i,a){var n=r(e,a);return t[n]||(t[n]=new Intl.NumberFormat(e,a)),t[n].format(i)}}function n(e,t){return function(i,a){var n=r(e,a);return t[n]||(t[n]=new Intl.DateTimeFormat(e,a)),t[n].format(i)}}function o(e){var t=e.split(/(\{.*?\})|(%\(.*?\)s)/g);if(1===t.length)return{str:[e],tokens:[]};var i=[];return{str:t.filter(Boolean).map(function(e){var t=e;if(f.test(t))t=e.slice(1,e.length-1);else{if(!v.test(t))return e;t=e.slice(2,e.length-2)}var r=i.indexOf(t);return~r?r:(i.push(t),i.length-1)}),tokens:i}}function s(e,t,r){var a=e.defaultMessage,n=t.str.map(function(e){if("string"==typeof e)return e;var n=t.tokens[e];return i.invariant(!!(n&&r&&n in r),"Missing token "+n+' when attempting to translate "'+t.str+'", defaultMessage "'+a+'"'),r[n]}).reduce(function(e,t){var i=e[e.length-1];return"number"==typeof t&&(t+=""),"string"!=typeof i||"string"!=typeof t?(e.push(t),e):(e[e.length-1]=i+t,e)},[]);return 1===n.length?n[0]:n}function l(e,t){return void 0===t&&(t={}),function(r,a){var n,l=r.id,c=r.defaultMessage;return l?(l in t||(t[l]=o(e[l]||c)),n=t[l],i.invariant(!!n,l+" was not in our list of translated messages")):(n=o(c),i.invariant(!!n,"Message was missing both `id` & `defaultMessage`")),s(r,n,a)}}function c(e,t){return void 0===t&&(t={}),function(r,a){var n,l=r.id,c=r.defaultMessage,d=e[l]||c;return l?(n=l in t?t[l]:"object"==typeof d?o(d.message(a[d.token])):t[l]=o(d),i.invariant(!!n,l+" was not in our list of translated messages")):(n=o(c),i.invariant(!!n,"Message was missing both `id` & `defaultMessage`")),s(r,n,a)}}function d(){return{messageFormat:{},numberFormat:{},dateTimeFormat:{}}}function u(e,t,i){return{formatMessage:l(t,i.messageFormat),formatNumber:a(e,i.numberFormat),formatDateTime:n(e,i.dateTimeFormat)}}function p(e,t,i){return{formatMessage:c(t,i.messageFormat),formatNumber:a(e,i.numberFormat),formatDateTime:n(e,i.dateTimeFormat)}}Object.defineProperty(t,"__esModule",{value:!0});var f=/\{.*?\}/,v=/%\(.*?\)s/;t.createI18nCache=d,t.createFormatters=u,t.createMetaserverFormatters=p,t.dummyFormatMessage=function(e){return e.defaultMessage},t.dummyI18nFormatters=u("en",{},d()),t.dummyMetaserverI18nFormatters=p("en",{},d())}),define("file-viewer/core",["require","exports","file-viewer/core/utils","file-viewer/core/i18n","file-viewer/core/invariant","file-viewer/core/ui/types","file-viewer/core/uuid","file-viewer/core/bootstrap","file-viewer/core/data/reducer","file-viewer/core/data/models","file-viewer/core/data/actions","file-viewer/core/middlewares/preview_data","file-viewer/core/logging/session","file-viewer/core/logging/actions","file-viewer/core/urls","file-viewer/core/data/riviera","file-viewer/core/extension_constants","file-viewer/core/utils","file-viewer/core/config"],function(e,t,i,r,a,n,o,s,l,c,d,u,p,f,v,_,m,w,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateFitBox=i.calculateFitBox,t.shallowEqual=i.shallowEqual,t.createFormatters=r.createFormatters,t.createI18nCache=r.createI18nCache,t.dummyFormatMessage=r.dummyFormatMessage,t.dummyI18nFormatters=r.dummyI18nFormatters,t.createMetaserverFormatters=r.createMetaserverFormatters,t.dummyMetaserverI18nFormatters=r.dummyMetaserverI18nFormatters,t.invariant=a.invariant,t.Theme=n.Theme,t.uuidV4=o.v4,t.createFileViewerSDK=s.createFileViewerSDK,t.reducers=l.reducers,t.DEFAULT_FILE_PREVIEW_UI=l.DEFAULT_FILE_PREVIEW_UI,t.PreviewType=c.PreviewType,t.Action=d.Action,t.fetchFileByFileIdSuccessAction=d.fetchFileByFileIdSuccessAction,t.fetchDataForPageResultAction=d.fetchDataForPageResultAction,t.fetchDocMetadataAction=d.fetchDocMetadataAction,t.fetchDocMetadataResultAction=d.fetchDocMetadataResultAction,t.refreshBlobSuccessAction=d.refreshBlobSuccessAction,t.updateDocCurrentPageIndex=d.updateDocCurrentPageIndex,t.zoomIn=d.zoomIn,t.zoomOut=d.zoomOut,t.zoomOriginalOrFit=d.zoomOriginalOrFit,t.updateMinScaleFactor=d.updateMinScaleFactor,t.refreshBlobAction=d.refreshBlobAction,t.openSidebar=d.openSidebar,t.closeSidebar=d.closeSidebar,t.openDocSidebar=d.openDocSidebar,t.closeDocSidebar=d.closeDocSidebar,t.setCurrentFilePreview=d.setCurrentFilePreview,t.pageUp=d.pageUp,t.pageDown=d.pageDown,t.previewsDataMiddleware=u.previewsDataMiddleware,t.createFilePreviewSession=p.createFilePreviewSession,t.EventType=p.EventType,t.DeviceType=p.DeviceType,t.SourceAction=p.SourceAction,t.SourceContext=p.SourceContext,t.UserAction=p.UserAction,t.UserActionContext=p.UserActionContext,t.logEvent=f.logEvent,t.logTTI=f.logTTI,t.imageUrl=v.imageUrl,t.RivieraStatus=_.RivieraStatus,t.RivieraError=_.RivieraError,t.PHOTO_EXTS=m.PHOTO_EXTS,t.DOC_EXTS=m.DOC_EXTS,t.PRESENTATION_EXTS=m.PRESENTATION_EXTS,t.resolvePreviewType=m.resolvePreviewType,t.getFileExtension=w.getFileExtension,t.fileSizeSupported=w.fileSizeSupported,t.getFileSizeLimit=w.getFileSizeLimit,t.resolveAsset=w.resolveAsset,t.DEFAULT_CONFIG=g.DEFAULT_CONFIG}),define("file-viewer/core/invariant",["require","exports"],function(e,t){"use strict";function i(e,t){if(!e){var i=void 0;throw void 0===t?i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(i=new Error(t),i.name="Invariant Violation"),i.framesToPop=1,i}}Object.defineProperty(t,"__esModule",{value:!0}),t.invariant=i}),define("file-viewer/core/logging/actions",["require","exports"],function(e,t){"use strict";function i(e){return{type:"@@previews/log",payload:e}}function r(e){return{type:"@@previews/logTTI",payload:e}}function a(e){return{type:"@@previews/updateSession",payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.UpdateSession="@@previews/updateSession",e.Log="@@previews/log",e.LogTTI="@@previews/logTTI"})(t.Action||(t.Action={})),t.logEvent=i,t.logTTI=r,t.updateSession=a}),define("file-viewer/core/logging/session",["require","exports","tslib","file-viewer/core/uuid","file-viewer/core/invariant"],function(e,t,i,r,a){"use strict";function n(e){var t,a=e||{},n=a.file_viewer_session_id,o=void 0===n?r.v4():n,s=a.file_preview_session_id,l=void 0===s?r.v4():s,c=a.file_id,d=void 0===c?"":c,u=a.file_extension,p=void 0===u?"":u,f=a.device_type,v=void 0===f?"desktop":f,_=a.extra,m=void 0===_?{}:_;return{file_viewer_session_id:o,file_preview_session_id:l,file_id:d,file_extension:p,device_type:v,extra:i.__assign({},m,{source_action:m.source_action||"visit",source_context:m.source_context||"file_viewer",file_preview_timeline:(t={},t.preview_attempted=Date.now(),t)})}}function o(e,t){var r,n=e.extra.file_preview_timeline;if(n[t])return e;switch(t){case"support_confirmed":case"support_denied":a.invariant(!!n.preview_attempted,"Event out of order"),a.invariant(!n.support_confirmed,"Cannot record support_confirmed & support_denied at the same time"),a.invariant(!n.support_denied,"Cannot record support_confirmed & support_denied at the same time");break;case"download_attempted":a.invariant(!!n.support_confirmed,"Event out of order");break;case"download_failed":case"download_succeeded":a.invariant(!!n.download_attempted,"Event out of order"),a.invariant(!n.download_succeeded,"Cannot record download_succeeded & download_failed at the same time"),a.invariant(!n.download_failed,"Cannot record download_succeeded & download_failed at the same time");break;case"render_succeeded":case"render_failed":a.invariant(!!n.download_succeeded,"Event out of order"),a.invariant(!n.render_succeeded,"Cannot record render_succeeded & render_failed at the same time"),a.invariant(!n.render_failed,"Cannot record render_succeeded & render_failed at the same time")}return i.__assign({},e,{extra:i.__assign({},e.extra,{file_preview_timeline:i.__assign({},e.extra.file_preview_timeline,(r={},r[t]=Date.now(),r))})})}function s(e){var t=i.__assign({},e.extra);if(t.time_to_primary_mark)return e;switch(t.primary_mark_ts||(t.primary_mark_ts=Date.now()),t.source_action){case"visit":a.invariant(!!t.page_start_ts,"Cannot calculate 1st page TTI without page_start_ts"),t.time_to_primary_mark=t.primary_mark_ts-t.page_start_ts;break;case"click":
a.invariant(t.file_preview_timeline&&!!t.file_preview_timeline.preview_attempted,"Cannot calculate subsequent page TTI without preview_attempted timestamp"),t.time_to_primary_mark=t.primary_mark_ts-t.file_preview_timeline.preview_attempted}return i.__assign({},e,{extra:t})}Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.mobile="mobile",e.tablet="tablet",e.desktop="desktop"})(t.DeviceType||(t.DeviceType={})),(function(e){e.Visit="visit",e.Click="click"})(t.SourceAction||(t.SourceAction={})),(function(e){e.FilePreviewSessionEnded="preview_session_ended",e.FilePreviewAttemptStarted="preview_attempted",e.FilePreviewSupportConfirmed="support_confirmed",e.FilePreviewSupportDenied="support_denied",e.FilePreviewDownloadAttempted="download_attempted",e.FilePreviewDownloadSucceeded="download_succeeded",e.FilePreviewDownloadFailed="download_failed",e.FilePreviewRenderSucceeded="render_succeeded",e.FilePreviewRenderFailed="render_failed",e.UserAction="user_action"})(t.EventType||(t.EventType={})),(function(e){e.Browse="browse",e.SharedLinkFile="sl_file",e.SharedLinkFolder="sl_folder",e.SharedLinkCollection="sl_collection",e.VersionHistory="version_history",e.FileViewer="file_viewer",e.Desktop="desktop",e.EmbeddedSharedLinkFile="embedded_sl_file",e.ArchiveFile="archive_file"})(t.SourceContext||(t.SourceContext={})),(function(e){e.Share="share",e.Download="download",e.PageChange="page_change",e.PageUp="page_up",e.PageDown="page_down",e.ToggleFullscreenOn="toggle_fullscreen_on",e.ToggleFullscreenOff="toggle_fullscreen_off",e.CloseDocSidebar="close_doc_sidebar",e.OpenDocSidebar="open_doc_sidebar",e.FlipNext="flip_next",e.FlipPrevious="flip_prev",e.ZoomIn="zoom_in",e.ZoomOut="zoom_out",e.ZoomOriginalOrFit="zoom_original_or_fit",e.ToggleSidebarOn="toggle_sidebar_on",e.ToggleSidebarOff="toggle_sidebar_off",e.PageJump="page_jump"})(t.UserAction||(t.UserAction={})),(function(e){e.Toolbar="toolbar",e.DocSidebar="doc_sidebar",e.Sidebar="sidebar",e.MouseWheel="mouse_wheel",e.DocReset="doc_reset",e.DocLink="doc_link"})(t.UserActionContext||(t.UserActionContext={})),t.createFilePreviewSession=n,t.recordEvent=o,t.markTTI=s}),define("file-viewer/core/middlewares/analytics",["require","exports","tslib","file-viewer/core/logging/actions","file-viewer/core/logging/session"],function(e,t,i,r,a){"use strict";function n(e){return Object.keys(e).reduce(function(t,i){var r=e[i];return"string"==typeof r||"number"==typeof r?t[i]=r:"boolean"==typeof r?t[i]=+r:"object"==typeof r&&r&&(t[i]=JSON.stringify(n(r))),t},{})}function o(e){return i.__assign({},e,{extra:n(e.extra)})}function s(e){return function(t){var s=t.getState;return function(t){return function(l){var d=null;if("@@previews/log"===l.type){var u=l.payload,p=u.event,f=u.fileViewerId;return d=a.recordEvent(s().loggingSession[f],p),e.log(p,o(d)),t(r.updateSession(d))}if("@@previews/logTTI"===l.type)return d=a.markTTI(s().loggingSession[l.payload]),e.logTTI(),t(r.updateSession(d));if(l.type in c){var v=l.payload,f=v.fileViewerId,_=v.sourceContext,m=s().loggingSession[f];e.log("user_action",o(i.__assign({},m,{extra:n({context:_,action:c[l.type]})})))}return t(l)}}}}Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l={},l["@@previews/zoomIn"]="zoom_in",l["@@previews/zoomOut"]="zoom_out",l["@@previews/fileViewerUi/closeDocSidebar"]="close_doc_sidebar",l["@@previews/fileViewerUi/openDocSidebar"]="open_doc_sidebar",l["@@previews/zoomOriginalOrFit"]="zoom_original_or_fit",l["@@previews/fileViewerUi/closeSidebar"]="toggle_sidebar_off",l["@@previews/fileViewerUi/openSidebar"]="toggle_sidebar_on",l["@@previews/updateDocCurrentPageIndex"]="page_jump",l["@@previews/pageDown"]="page_down",l["@@previews/pageUp"]="page_up",l);t.analyticsMiddleware=s}),define("file-viewer/core/middlewares/preview_data",["require","exports","tslib","file-viewer/core/data/actions"],function(e,t,i,r){"use strict";function a(e,t){var a=this;return function(){return function(n){return function(o){return i.__awaiter(a,void 0,void 0,function(){var a,s;return i.__generator(this,function(i){switch(i.label){case 0:return a=o.type,"@@previews/fetchFileByFileId"!==a?[3,2]:[4,e.rpc("get_preview_data_by_file_ids_batch",{file_ids:[o.payload.fileIdOrRevisionId]},t)];case 1:return s=i.sent(),[2,n(r.fetchFileByFileIdSuccessAction(s))];case 2:return[2,n(o)]}})})}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.previewsDataMiddleware=a}),define("file-viewer/core/middlewares/riviera_data",["require","exports","tslib","file-viewer/core/data/actions","file-viewer/core/data/riviera","file-viewer/core/data/riviera/transform","file-viewer/core/invariant","file-viewer/core/urls"],function(e,t,i,r,a,n,o,s){"use strict";function l(e,t,a){return i.__awaiter(this,void 0,void 0,function(){var s,l,c,d,u;return i.__generator(this,function(i){switch(i.label){case 0:s=a.payload.fileIdOrRevisionId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.fetchDocMetadata(a.payload.textUrlTmpl,!0)];case 2:return l=i.sent(),s=a.payload.fileIdOrRevisionId,o.invariant(!!e.previewData[s],"Preview Data for "+s+" should have been available"),c=e.previewData[s].content.image_url_tmpl,d=e.rivieraData[s]&&e.rivieraData[s].metadata,[2,r.fetchDocMetadataResultAction(s,n.processTextResponse(c,l,d))];case 3:return u=i.sent(),[2,r.fetchDocMetadataResultAction(a.payload.fileIdOrRevisionId,void 0,u)];case 4:return[2]}})})}function c(e){var t=this,c=new a.RivieraClientBase(e);return function(e){var a=e.getState,d=e.dispatch;return function(e){return function(u){return i.__awaiter(t,void 0,void 0,function(){var t,p,f,v,_,m,w,g,h,y,b,P,S;return i.__generator(this,function(F){switch(F.label){case 0:switch(p=a(),f=u.type){case"@@previews/fetchDocMetadata":return[3,1];case"@@previews/refreshBlob":return[3,3];case"@@previews/fetchDataForPage":return[3,7]}return[3,10];case 1:return v=e,[4,l(p,c,u)];case 2:return[2,v.apply(void 0,[F.sent()])];case 3:t=u.payload.fileIdOrRevisionId,F.label=4;case 4:return F.trys.push([4,6,,7]),[4,c.refreshDocBlob(u.payload.refreshUrl,u.payload.password)];case 5:return _=F.sent(),m=e(r.refreshBlobSuccessAction({fileIdOrRevisionId:t,preview:_})),o.invariant(!!p.previewData[t],"Preview Data for "+t+" should have been available"),w=p.rivieraData[t],w&&Array.isArray(w.pages)&&(g=i.__assign({},w,{pages:w.pages.map(function(e){return i.__assign({},e,{thumbnailUrl:s.imageUrl(_.image_url_tmpl,{page:e.pageIndex,scale_percent:0}),imgUrls:{"1x":s.imageUrl(_.image_url_tmpl,{page:e.pageIndex,scale_percent:0}),"4x":s.imageUrl(_.image_url_tmpl,{page:e.pageIndex,scale_percent:400})}})})}),e(r.fetchDocMetadataResultAction(t,g))),u.payload.password?[2,d(r.fetchDocMetadataAction(t,_.text_url_tmpl))]:[2,m];case 6:return h=F.sent(),[2,e(r.fetchDocMetadataResultAction(u.payload.fileIdOrRevisionId,void 0,h))];case 7:return F.trys.push([7,9,,10]),[4,c.fetchDocMetadata(u.payload.textUrlTmpl,!1,u.payload.pageLowerBound,u.payload.pageUpperBound)];case 8:return y=F.sent(),t=u.payload.fileIdOrRevisionId,o.invariant(!!p.previewData[t],"Preview Data for "+t+" should have been available"),b=p.previewData[t].content.image_url_tmpl,P=p.rivieraData[t]&&p.rivieraData[t].metadata,[2,e(r.fetchDataForPageResultAction(u.payload.fileIdOrRevisionId,n.processTextResponse(b,y,P)))];case 9:return S=F.sent(),[3,10];case 10:return[2,e(u)]}})})}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.rivieraDataMiddleware=c}),define("file-viewer/core/middlewares/ui_action_redispatcher",["require","exports","tslib","file-viewer/core/data/actions"],function(e,t,i,r){"use strict";function a(e){return!!e.metadata}Object.defineProperty(t,"__esModule",{value:!0}),t.uiActionRedispatcher=function(e){var t=e.getState;return function(e){return function(n){var o=t(),s=o.fileViewerUi,l=o.previewData,c=o.rivieraData,d=n.payload,u=d.fileIdOrRevisionId,p=d.fileViewerId,f=l[u],v=c[u];if(!(s[p]&&f&&f.content&&v))return e(n);if(!s[p][u])return e(n);switch(n.type){case"@@previews/zoomIn":return e(r.zoomIn(i.__assign({},n.payload,{previewType:"ssr_doc"===f.content[".tag"]?"ssr_doc":"image"})));case"@@previews/zoomOut":return e(r.zoomOut(i.__assign({},n.payload,{previewType:"ssr_doc"===f.content[".tag"]?"ssr_doc":"image"})));case"@@previews/pageDown":if("ssr_doc"===f.content[".tag"]&&a(v)&&v.metadata)return e(r.pageDown(i.__assign({},n.payload,{pageCount:v.metadata.page_count})))}return e(n)}}}}),define("file-viewer/core/ui/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.win="win",e.osx="osx",e.web="web"})(t.Theme||(t.Theme={}))}),define("file-viewer/core/urls",["require","exports"],function(e,t){"use strict";function i(e,t){Object.keys(t).forEach(function(i){e.searchParams.set(i,t[i])})}function r(e,t){var i=new URL(e);return i.searchParams.set("page",t[a.page].toString()),i.searchParams.set("scale_percent",t[a.scale_percent].toString()),i.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.updateQueryParam=i;var a;(function(e){e.scale_percent="scale_percent",e.page="page"})(a||(a={})),t.imageUrl=r}),define("file-viewer/core/utils",["require","exports","file-viewer/core/extension_constants"],function(e,t,i){"use strict";function r(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}function a(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var n=0;n<i.length;n++)if(!Object.prototype.hasOwnProperty.call(t,i[n])||!r(e[i[n]],t[i[n]]))return!1;return!0}function n(e,t,i){var r=e/t;return isNaN(i)||isNaN(r)||!isFinite(r)||!isFinite(i)?[0,0]:r>i?[t*i,t]:[e,e/i]}function o(e){var t=e.toLowerCase().match(/\.\w+$/);return t?t[0]:""}function s(e,t){var r=o(e),a=i.resolvePreviewType(r);return".pdf"===r?t.pdf_size_limit:i.PRESENTATION_EXTS.includes(r)?t.ppt_size_limit:i.DOC_EXTS.includes(r)?t.word_doc_size_limit:"archive"===a?t.archive_size_limit:"html"===a||"text"===a?t.text_size_limit:"linkfile"===a?t.linkfile_size_limit:0}function l(e,t,i){if(!isFinite(t))return!0;var r=s(e,i);return!r||t<=r}function c(e,t){return e[t]||t}Object.defineProperty(t,"__esModule",{value:!0}),t.shallowEqual=a,t.calculateFitBox=n;t.getFileExtension=o,t.getFileSizeLimit=s,t.fileSizeSupported=l,t.resolveAsset=c}),define("file-viewer/core/uuid",["require","exports"],function(e,t){"use strict";function i(){var e=n();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,o(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){var e,t,i=[];for(e=0,t=e;e<=255;e++,t=e)i.push((t+256).toString(16).substr(1));return i})(),a=function(e){return Array.from(e).map(function(e){return r[e]}).join("")},n=function(){var e=new Uint8Array(16);return"undefined"!=typeof window&&(window.crypto||window.msCrypto)&&(window.crypto||window.msCrypto).getRandomValues(e),e},o=function(e){var t=[e.slice(0,4),e.slice(4,6),e.slice(6,8),e.slice(8,10),e.slice(10,16)];return(function(){for(var i=[],r=0,n=Array.from(t);r<n.length;r++)e=n[r],i.push(a(e));return i})().join("-")};t.v4=i}),define("file-viewer/modes/data/actions",["require","exports"],function(e,t){"use strict";function i(e){return{payload:{controlId:e},type:"@@previews/sidebarControlClick"}}function r(e){return{payload:{visibility:e},type:"@@previews/setSidebarVisibility"}}Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.SidebarControlClick="@@previews/sidebarControlClick",e.SetSidebarVisibility="@@previews/setSidebarVisibility"})(t.Action||(t.Action={})),t.sidebarControlClickAction=i,t.setSidebarVisibilityAction=r}),define("file-viewer/modes/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.Default="default",e.Commenting="commenting",e.Documentation="documentation",e.Watermarking="watermarking"})(t.FileViewerMode||(t.FileViewerMode={}))}),define("file-viewer/modes",["require","exports","file-viewer/modes/data/types","file-viewer/modes/data/actions","file-viewer/modes/sidebar/sidebar","file-viewer/modes/sidebar/pane","file-viewer/modes/sidebar/types","file-viewer/modes/sidebar/control"],function(e,t,i,r,a,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileViewerMode=i.FileViewerMode,t.Action=r.Action,t.Sidebar=a.Sidebar,t.Pane=n.Pane,t.SidebarVisibility=o.SidebarVisibility,t.SidebarControlId=o.SidebarControlId,t.SidebarPaneId=o.SidebarPaneId,t.CommentControl=s.CommentControl,t.DocumentationControl=s.DocumentationControl,t.WatermarkControl=s.WatermarkControl}),define("file-viewer/modes/sidebar/content_panel",["require","exports","tslib","react"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r);var a={contentPanel:"_3EFqCzCKb6",paneStack:"_3lHePu0ldA"};t.ContentPanel=function(e){var t=e.registerSidebarPanesFn,n=i.__rest(e,["registerSidebarPanesFn"]),o=t(n),s=n.fileViewerUiData.sidebar.paneStack.map(function(e){var t=o[e];return t||console.error('Unable to find pane with paneId: "'+e+'"'),t}).filter(Boolean);return r.createElement("div",{className:a.contentPanel},r.createElement("div",{className:a.paneStack},s))}}),define("file-viewer/modes/sidebar/control",["require","exports","tslib","classnames","react","file-viewer/modes/sidebar/types","file-viewer/modes/data/actions"],function(e,t,i,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),a=i.__importStar(a);var s={control:"BXSQ8s4gfq",isSelected:"_3l-Swh4sdi",label:"_22fyCOPZYi",isExpanded:"H5wfE58sAf"};t.Control=function(e){var t,i=e.labelText,l=e.id,c=e.dispatch,d=e.fileViewerUiData;return a.createElement("button",{"data-control-id":l,className:r.default(s.control,(t={},t[s.isExpanded]=d.sidebar.visibility===n.SidebarVisibility.Expanded,t[s.isSelected]=d.sidebar.selectedControlId===l,t)),onClick:function(){return c(o.sidebarControlClickAction(l))}},a.createElement("span",{className:s.label},i))},t.DocumentationControl=function(e){var i=e.intl;return a.createElement(t.Control,Object.assign({},e,{id:n.SidebarControlId.Documentation,labelText:i.formatMessage({id:"20kEF",defaultMessage:"About"})}))},t.CommentControl=function(e){var i=e.intl;return a.createElement(t.Control,Object.assign({},e,{id:n.SidebarControlId.Comments,labelText:i.formatMessage({id:"3EzOJ",defaultMessage:"Comments"})}))},t.WatermarkControl=function(e){var i=e.intl;return a.createElement(t.Control,Object.assign({},e,{id:n.SidebarControlId.Watermark,labelText:i.formatMessage({id:"3dGD1",defaultMessage:"Watermark"})}))},t.defaultRenderSidebarControlsFn=function(e){return[a.createElement(t.DocumentationControl,Object.assign({key:"documentation-control"},e)),a.createElement(t.CommentControl,Object.assign({key:"comment-control"},e)),a.createElement(t.WatermarkControl,Object.assign({key:"watermark-control"},e))]}}),define("file-viewer/modes/sidebar/control_panel",["require","exports","tslib","classnames","react","file-viewer/modes/data/actions","file-viewer/modes/sidebar/types"],function(e,t,i,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),a=i.__importStar(a);var s={controlPanel:"i_u8PAkA_M",isExpanded:"_1m7cMIcr3q",isOpen:"q2I9x7FzHj"},l=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.onMouseEnter=function(){t.props.fileViewerUiData.sidebar.visibility===o.SidebarVisibility.Closed&&t.props.dispatch(n.setSidebarVisibilityAction(o.SidebarVisibility.Expanded))},t.onMouseLeave=function(){t.props.fileViewerUiData.sidebar.visibility===o.SidebarVisibility.Expanded&&t.props.dispatch(n.setSidebarVisibilityAction(o.SidebarVisibility.Closed))},t}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.renderSidebarControlsFn,l=i.__rest(t,["renderSidebarControlsFn"]),c=l.fileViewerUiData.sidebar.visibility;return a.createElement("div",{className:r.default(s.controlPanel,(e={},e[s.isExpanded]=c===o.SidebarVisibility.Expanded,e[s.isOpen]=c===o.SidebarVisibility.Open,e)),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},n(l))},t})(a.Component);t.ControlPanel=l}),define("file-viewer/modes/sidebar/pane",["require","exports","tslib","react"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r);var a={pane:"mr8CWsBI-a"};t.Pane=function(e){var t=e.children;return r.createElement("div",{className:a.pane},t)}}),define("file-viewer/modes/sidebar/sidebar",["require","exports","tslib","react","classnames","file-viewer/modes/sidebar/content_panel","file-viewer/modes/sidebar/control_panel","file-viewer/modes/sidebar/types"],function(e,t,i,r,a,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r),a=i.__importDefault(a);var l={sidebar:"_1ah_BhOiDc",isOpen:"_35m4GZHt8p",widthClosed:"56px",widthOpen:"320px"};t.Sidebar=function(e){var t,i=e.renderSidebarControlsFn,c=e.registerSidebarPanesFn,d=e.fileViewerUiData.sidebar.visibility;return r.createElement("aside",{className:a.default(l.sidebar,(t={},t[l.isOpen]=d===s.SidebarVisibility.Open,t))},r.createElement(n.ContentPanel,Object.assign({},e,{registerSidebarPanesFn:c})),r.createElement(o.ControlPanel,Object.assign({},e,{renderSidebarControlsFn:i})))}}),define("file-viewer/modes/sidebar/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.Closed="closed",e.Expanded="expanded",e.Open="open"})(t.SidebarVisibility||(t.SidebarVisibility={})),(function(e){e.Documentation="documentation",e.Comments="comments",e.Watermark="watermark"})(t.SidebarControlId||(t.SidebarControlId={})),(function(e){e.Documentation="documentation",e.Metadata="metadata",e.Comments="comments",e.Activity="activity"})(t.SidebarPaneId||(t.SidebarPaneId={}))}),define("file-viewer/strings",["require","exports","modules/core/i18n"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strings={"6nnDP":function(e){return i.ungettext("Viewed %(number)s year ago","Viewed %(number)s years ago",e,{comment:"label for last time a user has viewed the file"})},HTBEh:function(e){return i.ungettext("Viewed %(number)s month ago","Viewed %(number)s months ago",e,{comment:"label for last time a user has viewed the file"})},"32pDF":function(e){return i.ungettext("Viewed %(number)s week ago","Viewed %(number)s weeks ago",e,{comment:"label for last time a user has viewed the file"})},Roztq:function(e){return i.ungettext("Viewed %(number)s day ago","Viewed %(number)s days ago",e,{comment:"label for last time a user has viewed the file"})},"1Vt6M":function(e){return i.ungettext("Viewed %(number)s hour ago","Viewed %(number)s hours ago",e,{comment:"label for last time a user has viewed the file"})},"1-Qnz":function(e){return i.ungettext("Viewed %(number)s min ago","Viewed %(number)s mins ago",e,{comment:"label for last time a user has viewed the file"})},"1A8Wt":i._("Viewed just now",{comment:"label for last time a user has viewed the file"}),"3O68s":i._("99+",{comment:"label for facepile when there are more than 99 people having seen the file"}),"2u_Bg":function(e){return i.ungettext("%(count)s other","%(count)s others",e,{comment:"label for number of other people that viewed this file"})},"380FK":i._("Hide sidebar",{comment:"Tooltip text to hide preview sidebar"}),"1-hY4":i._("Show sidebar",{comment:"Tooltip text to show preview sidebar"}),"3r1su":i._("Fullscreen",{comment:"Fullscreen control for preview toolbar"}),"1crUg":i._("Page down",{comment:"Page down control for preview toolbar"}),"30U9L":i._("Page up",{comment:"Page up control for preview toolbar"}),yOZ5I:i._("Zoom in",{comment:"Zoom in control for preview toolbar"}),"2dTGQ":i._("Zoom out",{comment:"Zoom out control for preview toolbar"}),"3A0DU":i._("Previous",{comment:"Flip to the previous file in a series of files when previewing files on the web"}),"1XG6i":i._("Next",{comment:"Flip to the next file in a series of files when previewing files on the web"}),"1LWb5":i._("%(file_number)s of %(file_count)s",{comment:"Index indicator for preview toolbar file flipping controls"}),"3Dloj":i._("Page...",{comment:"Placeholder text for preview toolbar page indicator input"}),Z4LHJ:i._("Click to jump to a page",{comment:"Tooltip text for the page indicator"}),"1BXqX":i._("Zoom to fit",{comment:"Toolbar tooltip text for zooming an image to fit the viewport"}),"2iKGa":i._("View actual size",{comment:"Toolbar tooltip text for zooming an image to its real size"}),"2yLzB":i._("Page %(index)s",{comment:"label for each document page"}),"2w1Rq":i._("Document Sidebar",{comment:"a11y label for doc sidebar"}),uh_2T:i._("External Link",{comment:"Label for external anchor link"}),PLDnD:i._("Internal Link",{comment:"Label for internal anchor link"}),ACvIY:i._("Reload",{comment:"Reload button label"}),"1_qu7":i._("Close",{comment:"Close button label"}),"2nXNn":i._("Document Password Modal",{comment:"password modal label"}),"35GUv":i._("This file is password protected",{comment:"modal title"}),MBnKP:i._("Submit",{comment:"submit button label"}),Cx9Xf:i._("Cancel",{comment:"Cancel button label"}),"2eyfy":i._("The password you entered is incorrect, please try again.",{comment:"message in modal when user enters wrong passwords"}),"3X32N":i._("Enter the password to open this file.",{comment:"Password input prompt"}),NlVBZ:i._("Password",{comment:"Password input placeholder"}),"3QbUM":i._("%(extension)s files can’t currently be previewed. Download the file to see its full contents.",{comment:"Preview Error section message"}),"3XBdD":i._("This file is password-protected",{comment:"Preview Error section title"}),"2hEJT":i._("Remove the password via the original application (eg. MS Word, Adobe Photoshop) to preview the file on dropbox.com, or download the file to see full contents.",{comment:"Preview Error section message"}),"1qFPZ":i._("This file cannot be previewed",{comment:"Preview Error section title"}),"3QN14":i._("This is a supported filetype by Dropbox, but something went wrong. The file may be corrupted or have an incorrect extension. To view its full contents, download the file",{comment:"Preview Error section message"}),"3IvZ8":i._("Files without extensions cannot be previewed",{comment:"Preview Error section title"}),"1OWrj":i._("File suffixes (or extensions) indicate the type of file, and helps Dropbox generate the preview. Please add an extension, or download the file on your computer to view it.",{comment:"Preview Error section message"}),"1sf_t":i._("This file is too big to preview",{comment:"Preview Error section title"}),"2Lxyo":i._("Couldn’t preview file because its size exceeds %(size)s maximum. To view, download the file or reduce its size.",{comment:"Preview Error section message"}),"2aX8q":i._("File is uploading",{comment:"Preview Error section title"}),"28Uhd":i._("Once the file is fully uploaded and synced, you can preview it on Dropbox. Please wait for the syncing process to complete before previewing the file.",{comment:"Preview Error section message"}),"2l6UF":function(e){return i.ungettext("%(number)s year ago","%(number)s years ago",e,{comment:"label for comment that was left a few years ago"})},"4jyR0":function(e){return i.ungettext("%(number)s month ago","%(number)s months ago",e,{comment:"label for comment that was left a few months ago"})},"1i3A1":function(e){return i.ungettext("%(number)s week ago","%(number)s weeks ago",e,{comment:"label for comment that was left a few weeks ago"})},Vu6ED:function(e){return i.ungettext("%(number)s day ago","%(number)s days ago",e,{comment:"label for comment that was left a few days ago"})},"2qR7n":function(e){return i.ungettext("%(number)s hour ago","%(number)s hours ago",e,{comment:"label for comment that was left a few hours ago"})},"8pkVG":function(e){return i.ungettext("%(number)s min ago","%(number)s mins ago",e,{comment:"label for comment that was left a few mins ago"})},"2qZ7G":i._("Just now",{comment:"label for comment that was left less than a min ago"}),"8fDlH":i._("@mention someone to share this file",{comment:"mention instruction message"}),"3iN4V":i._("@mention someone",{comment:"mention btn label"}),"1nqpH":i._("Searching contacts…",{comment:"message displayed while search is processed"}),"2lweF":i._("No Users Found",{comment:"No Users Found"}),"nlds-":i._("Invite %(user_name)s",{comment:"invite message"}),"3pIbH":i._("Save",{comment:"edit button label"}),"2Wo9h":i._("This comment was deleted.",{comment:"message after comment is deleted"}),"3x7uu":i._("Edit",{comment:"edit button label"}),"2oCAM":i._("Delete",{comment:"delete button label"}),"3ZEru":i._("Mark as read",{comment:"Mark as read button label"}),"3UAhM":i._("Mark as unread",{comment:"Mark as unread button label"}),"1oD4j":i._("Marked as resolved",{comment:"Marked as resolved button label"}),LeHxj:i._("On older version",{comment:"message displayed when user is viewing an older version of the file"}),"4vU51":i._("Write a comment",{comment:"Write a comment button label"}),"1-FNO":i._("Post",{comment:"Post button label"}),"31CgX":i._("Restore",{comment:"Restore button label"}),"2cH3Z":i._("Resolve",{comment:"Resolve button label"}),"1X0tz":i._("Reply",{comment:"Reply button label"}),"1jeeF":i._("View version history",{comment:"View version history button label"}),"3qNGZ":i._("Page %(page)s",{comment:"page number where comment was left on"}),"1CYeW":i._("%(count)s comments",{comment:"number of comments left"}),"1g0Xl":i._("%(count)s unread",{comment:"number of unread comments"}),"1j6jP":i._("Comment thread",{comment:"Comment thread accessbility label"}),"3zwVy":i._("Unread comment thread",{comment:"Unread comment thread accessbility label"}),"1D-MZ":i._("Can’t show link. Something’s wrong with this file.",{comment:"Shown instead of description if there is an error"}),iTxna:i._("Open in new tab",{comment:"Label text for open button"}),"20kEF":i._("About",{comment:"Label next to a button that opens a panel with things like file metadata and activity."}),"3EzOJ":i._("Comments",{comment:"Label next to a button that opens a panel for leaving comments on a file."}),"3dGD1":i._("Watermark",{comment:"Label next to a button that opens a panel for creating a watermark."})}}),define("modules/clean/file_store/actions",["require","exports","tslib","modules/clean/file_store/types","modules/clean/file_store/utils","external/lodash"],function(e,t,i,r,a,n){"use strict";function o(e,t){return{type:r.FileNamespaceActions.PutFile,payload:{file:e,fileId:null!=t?t:a.getFileStoreId(e)}}}function s(e){var t=n.keyBy(e,a.getFileStoreId);return{type:r.FileNamespaceActions.PutFileMap,payload:t}}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.putFile=o,t.putFiles=s}),define("modules/clean/file_store/reducer",["require","exports","tslib","modules/clean/file_store/types"],function(e,t,i,r){"use strict";function a(e,a){void 0===e&&(e=t.defaultFileState);var n;switch(a.type){case r.FileNamespaceActions.PutFile:return i.__assign({},e,(n={},n[a.payload.fileId]=a.payload.file,n));case r.FileNamespaceActions.PutFileMap:return i.__assign({},e,a.payload)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFileState={},t.fileNamespaceReducer=a}),define("modules/clean/file_store/selectors",["require","exports","modules/clean/file_store/reducer","modules/clean/redux/types","modules/clean/redux/selectors"],function(e,t,i,r,a){"use strict";function n(e){return a.getStateAtNamespace(e,r.FILE_NAMESPACE_KEY)||i.defaultFileState}function o(e,t){return t?n(e)[t]:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=o}),define("modules/clean/file_store/types",["require","exports","modules/clean/react/previews/archive/types","modules/clean/react/browse/model_types","modules/clean/shared_link/types"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArchiveFile=i.File,t.BrowseFile=r.File,t.SharedFile=a.File,t.SharedFolder=a.Folder;(function(e){e.PutFile="PUT_FILE",e.PutFileMap="PUT_FILE_MAP"})(t.FileNamespaceActions||(t.FileNamespaceActions={}))}),define("modules/clean/file_store/utils",["require","exports","tslib","modules/clean/filepath"],function(e,t,i,r){"use strict";function a(e,t){return e.ns_id===t.ns_id&&e.sjid===t.sjid}function n(e){return"fq_path"in e}function o(e){return"subpath"in e}function s(e){return!n(e)&&!o(e)}function l(e){return u(e)}function c(e){return e.is_dir}function d(e){return e.is_dir&&"fq_path"in e}function u(e){return e.ns_id+":"+e.sjid}function p(e){var t="fq_path"in e?e.fq_path:e.filename;return r.file_extension(t)}function f(e){return c(e)?d(e)?r.filename(e.fq_path):e.filename:n(e)?r.filename(e.fq_path):e.filename}function v(e){var t=f(e);return r.filename_without_extension(t)}function _(e){return 0===e.bytes}function m(e){return e.is_symlink&&_(e)}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r),t.areFilesEqual=a,t.isBrowseFile=n,t.isArchiveFile=o,t.isSharedFile=s,t.getFileStoreId=l,t.isFolder=c,t.isBrowseFolder=d,t.getFileRevisionId=u,t.getExtension=p,t.getFilename=f,t.getFilenameWithoutExtension=v,t.isEmptyFile=_,t.isSymLink=m}),define("modules/clean/open_in_app/types",["require","exports","tslib","modules/constants/file_viewer"],function(e,t,i,r){"use strict";function a(e){return e.platform===o.IPAD||e.platform===o.IPHONE}function n(e){return e.platform===o.ANDROID_MARKET}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r);var o=r.OpenInMobileAppPlatform;t.areUrlsIOS=a,t.areUrlsAndroid=n}),define("modules/clean/previews/api",["require","exports","tslib","modules/clean/api_v2/user_client","modules/clean/api_v2/noauth_client","modules/clean/ajax_as_promised","modules/core/uri","file-viewer/core"],function(e,t,i,r,a,n,o,s){"use strict";function l(e,t){if(!t)return Promise.reject(new Error("user not logged in, no support for un-auth'd users yet"));var i={files:e.map(function(e){return{ns_id:e.ns_id,sj_id:e.sjid}})};return t?(new r.UserApiV2Client).ns("previews").rpc("get_preview_data_batch",i,{subjectUserId:t.id}):(new a.NoAuthApiV2Client).ns("previews").rpc("get_preview_data_batch",i,{})}function c(e){return void 0!==e.image}function d(e){var i=t.getParsedDropboxMetadataHeader(e.jqXHR);return 401===e.jqXHR.status&&"1"===e.jqXHR.getResponseHeader("x-dropbox-pdf-password-needed")?new s.RivieraError("Password required",s.RivieraStatus.PasswordProtected):new s.RivieraError("Load Error",i.rivieraStatusCode)}function u(e,t,r){return i.__awaiter(this,void 0,Promise,function(){var a,o,s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.SilentBackgroundRequest({url:e,dataType:"json",type:"POST",data:r?{password:r}:{},xhrFields:{withCredentials:!0},skipInjectCsrf:f(e)})];case 1:return a=i.sent(),[3,3];case 2:throw o=i.sent(),d(o);case 3:return c(a)?[2,{text_url_tmpl:a.text,image_url_tmpl:a.image,refresh_url:a.refresh}]:(s=a.old_blob,l=a.new_blob,[2,{text_url_tmpl:t.text_url_tmpl.replace(s,l),image_url_tmpl:t.image_url_tmpl.replace(s,l),refresh_url:t.refresh_url.replace(s,l)}])}})})}function p(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.SilentBackgroundRequest({dataType:"json",type:"GET",url:e,xhrFields:{withCredentials:!0},skipInjectCsrf:f(e)})];case 1:return[2,i.sent()];case 2:throw t=i.sent(),d(t);case 3:return[2]}})})}function f(e){return o.URI.parse(e).getAuthority().toLocaleLowerCase().indexOf("dropbox.com")<0}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.MAX_REQUEST_SIZE=50,t.fetchPreviewData=l,t.refreshBlob=u,t.requestDocMetadata=p,t.getParsedDropboxMetadataHeader=function(e){var t={};try{var i=e.getResponseHeader("x-dropbox-metadata");i&&(t=JSON.parse(i))}catch(e){}return t}}),
define("modules/clean/previews/data/actions",["require","exports","tslib","external/lodash","modules/clean/previews/data/types","modules/clean/redux/types","modules/clean/previews/data/util","modules/clean/previews/api","modules/clean/file_store/utils","modules/clean/react/previews/pdf_viewer/urls"],function(e,t,i,r,a,n,o,s,l,c){"use strict";function d(e){var t={};return e.forEach(function(e){var i=l.getFileRevisionId(e),r=e.preview;r&&(t[i]={data:r,status:n.ApiClientStatus.Success})}),{type:a.ActionTypes.UpdatePreviewData,payload:t}}function u(e,t){var i=e.revision_id;return{type:a.ActionTypes.OverrideWithComments1Revision,payload:{revisionId:i,preview:t}}}function p(e){var t=e.revision_id;return{type:a.ActionTypes.ClearOverrideWithComments1Revision,payload:{revisionId:t}}}function f(e,t){var i,r=l.getFileRevisionId(e),n=(i={},i[r]={},i);return t.forEach(function(e){e.preview&&(n[r][e.subpath]=e.preview)}),{type:a.ActionTypes.PopulateArchiveFiles,payload:n}}function v(e,t,r){var a=this;return function(n,l){return i.__awaiter(a,void 0,void 0,function(){var a,c,d;return i.__generator(this,function(i){return a=o.filterFilesMissingPreviewData(l(),e,r),0===a.length?[2]:(c=o.chunkFiles(a,s.MAX_REQUEST_SIZE),d=c.map(function(e){return m(n,e,t)}),[2,Promise.all(d)])})})}}function _(e,t){return s.fetchPreviewData([e],t).then(function(e){if(e.results.length>0){var t=e.results[0].preview;if(t&&t.preview_url)return t.preview_url}})}function m(e,r,a){return i.__awaiter(this,void 0,void 0,function(){var n,o,l;return i.__generator(this,function(i){switch(i.label){case 0:n=w(r),e(t.apiRequestInFlightAction(n)),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,s.fetchPreviewData(r,a)];case 2:return o=i.sent(),[2,e(y(o))];case 3:return l=i.sent(),[2,e(b(n))];case 4:return[2]}})})}function w(e){return e.reduce(function(e,t){return e[l.getFileRevisionId(t)]={data:void 0,status:n.ApiClientStatus.Request},e},{})}function g(e,t){return e.reduce(function(e,i){return e[l.getFileRevisionId(i)]={data:i.preview,status:t},e},{})}function h(e){return{type:a.ActionTypes.UpdatePreviewData,payload:e}}function y(e){return{type:a.ActionTypes.UpdatePreviewData,payload:e.results.reduce(function(e,t){return e[o.buildRevisionId(t.file.ns_id,t.file.sj_id)]={data:t.preview||t.err,status:t.err||!t.preview?n.ApiClientStatus.Error:n.ApiClientStatus.Success},e},{})}}function b(e){return{type:a.ActionTypes.UpdatePreviewData,payload:r.mapValues(e,function(e){return{data:void 0,status:n.ApiClientStatus.Error}})}}function P(e,t){return{type:a.ActionTypes.RefreshDocBlobResult,payload:{revisionId:e,preview:t}}}function S(e,t,r,a){var n=this;return function(o){return i.__awaiter(n,void 0,void 0,function(){var n,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,s.refreshBlob(t,r,a)];case 1:return n=i.sent(),o(P(e,n)),o(I(e,n.text_url_tmpl)),[3,3];case 2:return l=i.sent(),o(F(e,void 0,l)),[3,3];case 3:return[2]}})})}}function F(e,t,i){return{type:a.ActionTypes.FetchDocMetadataResult,payload:{revisionId:e,metadata:t},error:i}}function E(e,t,i){return{type:a.ActionTypes.FetchDataForPageResult,payload:{revisionId:e,metadata:t},error:i}}function I(e,t){var r=this;return function(a){return i.__awaiter(r,void 0,void 0,function(){var r,n;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,s.requestDocMetadata(c.textUrl(t,!0))];case 1:return r=i.sent(),[3,3];case 2:return n=i.sent(),a(F(e,void 0,n)),[3,3];case 3:return a(F(e,r)),[2]}})})}}function x(e,t,r,a){var n=this;return function(o){return i.__awaiter(n,void 0,void 0,function(){var n,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,s.requestDocMetadata(c.textUrl(t,!1,r,a))];case 1:return n=i.sent(),o(E(e,n)),[3,3];case 2:return l=i.sent(),[3,3];case 3:return[2]}})})}}function D(){return{type:a.ActionTypes.ClearVirtualPreviewMetadata}}function A(e,t){var i=e.ns_id,r=e.sjid;return{type:a.ActionTypes.SetVirtualPreviewMetadata,payload:{revisionId:o.buildRevisionId(i,r),preview:t}}}function O(e){var t=e.ns_id,i=e.sjid;return{type:a.ActionTypes.ApplyVirtualPreviewMetadata,payload:o.buildRevisionId(t,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.populateFilesPreviewData=d,t.overridePreviewForComments=u,t.clearCommentsPreviewOverride=p,t.populateArchivePreviews=f,t.fetchPreviewData=v,t.fetchPreviewUrl=_,t.buildPreviewData=g,t.updatePreviewData=h,t.apiRequestInFlightAction=h,t.apiRequestSuccessAction=y,t.apiRequestErrorAction=b,t.refreshBlobAction=S,t.fetchDocMetadataResultAction=F,t.fetchDataForPageResultAction=E,t.fetchDocMetadata=I,t.fetchDataForPage=x,t.clearVirtualPreviewMetadata=D,t.setVirtualPreviewMetadata=A,t.applyVirtualPreviewMetadata=O}),define("modules/clean/previews/data/preview_type_util",["require","exports","modules/clean/previews/constants"],function(e,t,i){"use strict";function r(e){return function(t){var i=a(t);return!!i&&i===e}}function a(e){if(e&&e.content)return e.content[".tag"]}Object.defineProperty(t,"__esModule",{value:!0}),t.isArchive=r(i.PreviewType.Archive),t.isRawHtml=r(i.PreviewType.RawHTML),t.isExcel=r(i.PreviewType.Excel),t.isVideo=r(i.PreviewType.Video),t.isAudio=r(i.PreviewType.Audio),t.isLinkfile=r(i.PreviewType.Linkfile),t.isHtml=r(i.PreviewType.HTML),t.isSsrDoc=r(i.PreviewType.SsrDoc),t.isImage=r(i.PreviewType.Image),t.isCloudDoc=r(i.PreviewType.CloudDoc),t.isRestricted=r(i.PreviewType.Restricted),t.isOther=r(i.PreviewType.Other),t.getPreviewType=a}),define("modules/clean/previews/data/reducer",["require","exports","tslib","external/lodash","modules/clean/previews/data/types","modules/clean/react/previews/pdf_viewer/urls"],function(e,t,i,r,a,n){"use strict";function o(e){if(!e||!e.pages)return{};var t=e.links,r=e.schema_version,a=e.pages,n=e.fonts,o=void 0===n?[]:n,s=Object.keys(a),l={schema_version:r,links:t,pages:{}};return s.filter(function(e){return!!a[e]}).forEach(function(e){l.pages[e]=a[e].map(function(e){return i.__assign({},e,{font:o[e.f]})})}),l}function s(e,s){void 0===e&&(e=t.initialState);var c,d,u,p,f,v,_,m,w,g;switch(s.type){case a.ActionTypes.PopulateArchiveFiles:return i.__assign({},e,{archivePreviews:r.merge({},e.archivePreviews,s.payload)});case a.ActionTypes.ClearVirtualPreviewMetadata:return i.__assign({},e,{virtualPreviews:{}});case a.ActionTypes.SetVirtualPreviewMetadata:var h=s.payload,y=h.preview,b=h.revisionId;return i.__assign({},e,{virtualPreviews:r.merge({},e.virtualPreviews,(c={},c[b]=y,c))});case a.ActionTypes.ApplyVirtualPreviewMetadata:var P=s.payload;return i.__assign({},e,{filePreviews:r.merge({},e.filePreviews,(d={},d[P]={data:e.virtualPreviews[P]},d)),virtualPreviews:r.omit(e.virtualPreviews,P)});case a.ActionTypes.UpdatePreviewData:return i.__assign({},e,{filePreviews:i.__assign({},e.filePreviews,s.payload)});case a.ActionTypes.OverrideWithComments1Revision:return g=s.payload.revisionId,i.__assign({},e,{comments1Override:i.__assign({},e.comments1Override,(u={},u[g]=s.payload.preview,u))});case a.ActionTypes.ClearOverrideWithComments1Revision:return i.__assign({},e,{comments1Override:i.__assign({},e.comments1Override,(p={},p[s.payload.revisionId]=void 0,p))});case a.ActionTypes.RefreshDocBlobResult:return g=s.payload.revisionId,i.__assign({},e,{filePreviews:i.__assign({},e.filePreviews,(f={},f[g]=i.__assign({},e.filePreviews[g],{data:i.__assign({},e.filePreviews[g].data,{content:i.__assign({},e.filePreviews[g].data.content,s.payload.preview,{placeholder_image_url:s.payload.preview.placeholder_image_url||n.imageUrl(s.payload.preview.image_url_tmpl)})})}),f))});case a.ActionTypes.FetchDocMetadataResult:if(g=s.payload.revisionId,s.error)return i.__assign({},e,{docPreviewMetadata:i.__assign({},e.docPreviewMetadata,(v={},v[g]={metadata:l,text:{},error:s.error},v))});if(s.payload.metadata){var S=s.payload.metadata,F=S.metadata,E=void 0===F?l:F,I=S.text,x={},D=e.docPreviewMetadata[g];return E&&(E=i.__assign({},D&&D.metadata||{},E)),I&&(x=i.__assign({},D&&D.text||{},o(I))),i.__assign({},e,{docPreviewMetadata:i.__assign({},e.docPreviewMetadata,(_={},_[g]={metadata:E,text:x},_))})}return e;case a.ActionTypes.FetchDataForPageResult:g=s.payload.revisionId;var D=e.docPreviewMetadata[g]||{metadata:l,text:{}};if(s.error)return i.__assign({},e,{docPreviewMetadata:i.__assign({},e.docPreviewMetadata,(m={},m[g]=i.__assign({},D,{error:s.error}),m))});if(s.payload.metadata){var A=s.payload.metadata,E=A.metadata,I=A.text,x={};if(E=E?r.merge({},D.metadata,E):D.metadata,I){var O=o(I);x=r.merge({},D.text,O)}else x=D.text;return i.__assign({},e,{docPreviewMetadata:i.__assign({},e.docPreviewMetadata,(w={},w[g]={metadata:E,text:x},w))})}return e;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r),t.initialState={filePreviews:{},docPreviewMetadata:{},comments1Override:{},archivePreviews:{},virtualPreviews:{}};var l={schema_version:0,page_count:0,dimensions:[]};t.reducer=s}),define("modules/clean/previews/data/selectors",["require","exports","modules/clean/redux/types","modules/clean/redux/selectors","modules/clean/file_store/utils"],function(e,t,i,r,a){"use strict";function n(e){return r.getStateAtNamespace(e,i.PREVIEW_NAMESPACE_KEY)}function o(e,t){var i=n(e);return i&&t?i.comments1Override[t]||i.virtualPreviews[t]||i.filePreviews[t]&&i.filePreviews[t].data:{}}function s(e,t){var i=n(e);return!(!i||!t)&&(!i.comments1Override[t]&&!!i.virtualPreviews[t])}function l(e,t){var r=n(e);if(!r||!t)return p;var o=a.getFileRevisionId(t),s=r.comments1Override[t.revision_id];if(s)return{data:s,status:i.ApiClientStatus.Success};if(r.virtualPreviews[o])return{data:r.virtualPreviews[o],status:i.ApiClientStatus.Success};var l=r.filePreviews[o];return l&&l.status?l:p}function c(e,t){return t.reduce(function(t,i){return t[a.getFileRevisionId(i)]=l(e,i),t},{})}function d(e,t){var n=r.getStateAtNamespace(e,i.PREVIEW_NAMESPACE_KEY);if(!n||!t)return p;var o=n.archivePreviews[a.getFileRevisionId(t)];return o?{data:o[t.subpath],status:i.ApiClientStatus.Success}:p}function u(e,t){var a=r.getStateAtNamespace(e,i.PREVIEW_NAMESPACE_KEY);if(a)return a.docPreviewMetadata[t]}Object.defineProperty(t,"__esModule",{value:!0});var p={data:void 0,status:i.ApiClientStatus.Error};t.getApiDataForRevisionId=o,t.getIsVirtualRevisionId=s,t.getApiDataForFile=l,t.getApiDataForFiles=c,t.getPreviewForArchiveFile=d,t.getDocMetadataByRevisionId=u}),define("modules/clean/previews/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.PopulateArchiveFiles="FileViewer/Previews/PopulateArchiveFiles",e.UpdatePreviewData="FileViewer/Previews/UpdatePreviewData",e.OverrideWithComments1Revision="FileViewer/Previews/OverrideWithComments1Revision",e.ClearOverrideWithComments1Revision="FileViewer/Previews/ClearOverrideWithComments1Revision",e.RefreshDocBlob="FileViewer/Previews/RefreshDocBlob",e.RefreshDocBlobResult="FileViewer/Previews/RefreshDocBlobResult",e.FetchDocMetadata="FileViewer/Previews/FetchDocMetadata",e.FetchDocMetadataResult="FileViewer/Previews/FetchDocMetadataResult",e.FetchDataForPageResult="FileViewer/Previews/FetchDataForPageResult",e.ApplyVirtualPreviewMetadata="FileViewer/Previews/ApplyVirtualPreviewMetadata",e.ClearVirtualPreviewMetadata="FileViewer/Previews/ClearVirtualPreviewMetadata",e.SetVirtualPreviewMetadata="FileViewer/Previews/SetVirtualPreviewMetadata"})(t.ActionTypes||(t.ActionTypes={}))}),define("modules/clean/previews/data/util",["require","exports","tslib","external/lodash","modules/clean/previews/data/selectors","modules/clean/file_store/utils","modules/clean/redux/types"],function(e,t,i,r,a,n,o){"use strict";function s(e,t,i){if(void 0===i&&(i=!1),i)return t;var s=a.getApiDataForFiles(e,t);return r.filter(t,function(e){var t=n.getFileRevisionId(e);return!e.is_dir&&(!s[t]||!s[t].data&&s[t].status===o.ApiClientStatus.Error)})}function l(e,t){return e+":"+t}function c(e,t){var i=a.getApiDataForFile(e,t);return!(!i||!i.data||i.status===o.ApiClientStatus.Error)}function d(e,t){return u(e,t)===o.ApiClientStatus.Request}function u(e,t){var i=a.getApiDataForFile(e,t);return i?i.status:void 0}function p(e,t){if(e.length<=0)return[];if(e.length<t)return[e];for(var i=Array(Math.ceil(e.length/t)),r=0,a=0;r<e.length;)i[a++]=e.slice(r,r+=t);return i}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r),t.filterFilesMissingPreviewData=s,t.buildRevisionId=l,t.previewDataPresentForFile=c,t.previewDataInFlight=d,t.previewDataStatus=u,t.chunkFiles=p}),define("modules/clean/react/browse/model_types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("modules/clean/react/file_viewer/constants",["require","exports","modules/clean/react/size_class/constants"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;(function(e){e.Setup="SETUP",e.Cleanup="CLEANUP",e.UpdateFiles="UPDATE_FILES",e.FlipNext="FLIP_NEXT",e.FlipPrevious="FLIP_PREVIOUS",e.OpenFullscreen="OPEN_FULLSCREEN",e.CloseFullscreen="CLOSE_FULLSCREEN",e.SwitchRevision="SWITCH_REVISION",e.RestoreRevision="RESTORE_REVISION",e.SaveForwardRevision="SAVE_FORWARD_REVISION",e.BroadcastRenderStatus="BROADCAST_RENDER_STATUS",e.HideOpenInAppBanner="HIDE_OPEN_IN_APP_BANNER"})(t.ActionType||(t.ActionType={}));(function(e){e[e.Unknown=0]="Unknown",e[e.Loading=1]="Loading",e[e.Succeeded=2]="Succeeded"})(t.PreviewRenderStatus||(t.PreviewRenderStatus={}));(function(e){e.FileViewerOpened="FILE_VIEWER_OPENED",e.FilePreviewSessionEnded="FILE_PREVIEW_SESSION_ENDED",e.FilePreviewAttemptStarted="FILE_PREVIEW_ATTEMPT_STARTED",e.FilePreviewSupportConfirmed="FILE_PREVIEW_SUPPORT_CONFIRMED",e.FilePreviewSupportDenied="FILE_PREVIEW_SUPPORT_DENIED",e.FilePreviewDownloadAttempted="FILE_PREVIEW_DOWNLOAD_ATTEMPTED",e.FilePreviewDownloadSucceeded="FILE_PREVIEW_DOWNLOAD_SUCCEEDED",e.FilePreviewDownloadFailed="FILE_PREVIEW_DOWNLOAD_FAILED",e.FilePreviewRenderSucceeded="FILE_PREVIEW_RENDER_SUCCEEDED",e.FilePreviewRenderFailed="FILE_PREVIEW_RENDER_FAILED",e.FilePreviewPASSShown="FILE_PREVIEW_PASS_SHOWN",e.FilePreviewPASSHover="FILE_PREVIEW_PASS_HOVER",e.FilePreviewPASSClick="FILE_PREVIEW_PASS_CLICK",e.BrowsePASSShown="BROWSE_PASS_SHOWN",e.BrowsePASSHover="BROWSE_PASS_HOVER",e.BrowsePASSClick="BROWSE_PASS_CLICK",e.FilePreviewFidelitySurveyAsked="FILE_PREVIEW_FIDELITY_SURVEY_ASKED",e.FilePreviewFidelitySurveyAnswered="FILE_PREVIEW_FIDELITY_SURVEY_ANSWERED",e.FilePreviewFidelitySurveyDismissed="FILE_PREVIEW_FIDELITY_SURVEY_DISMISSED",e.FilePreviewUserAction="FILE_PREVIEW_USER_ACTION",e.FilePreviewVideoStalled="FILE_PREVIEW_VIDEO_STALLED",e.FilePreviewVideoToggled="FILE_PREVIEW_VIDEO_TOGGLED",e.FilePreviewVideoTruncated="FILE_PREVIEW_VIDEO_TRUNCATED",e.ArchivePreviewContentsScanned="ARCHIVE_PREVIEW_CONTENTS_SCANNED",e.FilePreviewModeDetermined="FILE_PREVIEW_MODE_DETERMINED",e.FilePreviewModeBounce="FILE_PREVIEW_MODE_BOUNCE"})(t.EventType||(t.EventType={}));(function(e){e.ExcelHTML="test-workbook.html"})(t.CannedTestFilename||(t.CannedTestFilename={}));(function(e){e[e.Frame=0]="Frame",e[e.Window=1]="Window"})(t.FileViewerInterfaceType||(t.FileViewerInterfaceType={}));(function(e){e[e.TitleBar=0]="TitleBar",e[e.PreviewContent=1]="PreviewContent",e[e.Sidebar=2]="Sidebar"})(t.FileViewerPane||(t.FileViewerPane={}));(function(e){e.AppDownloadInterstitialClose="app_download_interstitial_close",e.AppDownloadInterstitialContinue="app_download_interstitial_continue",e.AppDownloadInterstitialInstall="app_download_interstitial_install",e.AppDownloadInterstitialView="app_download_interstitial_view",e.ArchiveNavigation="archive_navigation",e.CopyToPaper="copy_to_paper",e.Share="share",e.Download="download",e.SaveToDropbox="save_to_dropbox",e.SaveToDropboxPersonal="save_to_dropbox_personal",e.SaveToDropboxWork="save_to_dropbox_work",e.OpenInApp="open_in_app",e.OpenInOfficeOnline="open_in_office_online",e.OpenInUnity="open_in_unity",e.OpenInUnityFolder="open_in_unity_folder",e.OpenWithAppAction="open_with_app_action",e.OpenWithCloudDocEditor="open_with_cloud_doc_editor",e.OpenPrepareForSignature="open_prepare_for_signature",e.ModeChange="mode_change",e.PageChange="page_change",e.PageUp="page_up",e.PageDown="page_down",e.PresentInZoom="present_in_zoom",e.RemoveLink="remove_link",e.ShareToSlack="share_to_slack",e.InviteViaEmail="invite_via_email",e.ViewRevisions="view_revisions",e.ClickDropboxLogo="click_dropbox_logo",e.ClickCustomLogo="click_custom_logo",e.ToggleCommentsOn="toggle_comments_on",e.ToggleCommentsOff="toggle_comments_off",e.SignIn="sign_in",e.ClickNotifications="click_notifications",e.ClickAccountMenu="click_account_menu",e.ToggleFullscreenOn="toggle_fullscreen_on",e.ToggleFullscreenOff="toggle_fullscreen_off",e.ToggleSidebarOn="toggle_sidebar_on",e.ToggleSidebarOff="toggle_sidebar_off",e.Print="print",e.InlineSearch="inline_search",e.FlipNext="flip_next",e.FlipPrevious="flip_prev",e.ZoomIn="zoom_in",e.ZoomOut="zoom_out",e.VideoPlaybackRateChanged="playback_rate_changed",e.WatermarkOpenApplyMenu="watermark_open_apply_menu",e.WatermarkApplySaveAsCopy="watermark_apply_save_as_copy",e.WatermarkApplyOverwrite="watermark_apply_overwrite",e.WatermarkCancel="watermark_cancel",e.WatermarkEnable="watermark_enable",e.WatermarkJumpToCopy="watermark_jump_to_copy",e.ScrollUp="scroll_up",e.ScrollDown="scroll_down"})(t.UserAction||(t.UserAction={}));(function(e){e.AppDownloadInterstitial="app_download_interstitial",e.TitleBarMain="title_bar_main",e.TitleBarSplitButton="title_bar_open_split_button",e.TitleBarMore="title_bar_more",e.TitleBarBackButton="title_bar_back_button",e.TitleBarSecondaryButton="title_bar_secondary_button",e.PreviewContentMain="preview_content_main",e.PreviewContentSplitButton="preview_content_open_split_button",e.Toolbar="toolbar",e.VideoPlayer="video_player",e.OpenInAppBanner="open_in_app_banner",e.LightboxFrame="lightbox_frame",e.LightboxToolbar="lightbox_toolbar",e.LightboxCloseButton="lightbox_close_button",e.Sidebar="sidebar",e.ModeView="mode_view",e.ModeWatermark="mode_watermark",e.Keyboard="keyboard",e.Browser="browser",e.Unknown="unknown",e.WatermarkOverwriteNotice="watermark_overwrite_notice",e.WatermarkSavedAsCopyNotice="watermark_saved_as_copy_notice"})(t.UserActionContext||(t.UserActionContext={}));(function(e){e[e.Main=0]="Main",e[e.Split=1]="Split"})(t.SplitButtonActionLocation||(t.SplitButtonActionLocation={}));t.SizeClassFilenameLengthMap=(r={},r[i.SizeClass.Small]=12,r[i.SizeClass.Medium]=25,r[i.SizeClass.Large]=35,r),t.ResponsiveClassName="responsive-enabled",t.SubpathQueryKey="file_subpath",t.PageQueryKey="page",t.UnsupportedExtensionHelpLink="https://www.dropbox.com/help/files-folders/file-types-that-preview";(function(e){e.default="default",e.html="html",e.pdf="pdf",e.ppt="ppt",e.spreadsheet="spreadsheet",e.image="image"})(t.DocType||(t.DocType={}))}),define("modules/clean/react/previews/archive/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("modules/clean/react/previews/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.LoadError="LOAD_ERROR",e.SupportError="SUPPORT_ERROR",e.ExtensionError="EXTENSION_ERROR",e.NeedFlashError="NEED_FLASH_ERROR",e.FileSizeError="FILE_SIZE_ERROR",e.PasswordProtectedError="PASSWORD_PROTECTED_ERROR",e.PendingUploadError="PENDING_UPLOAD_ERROR",e.EmptyFileError="EMPTY_FILE_ERROR",e.SymLinkError="SYM_LINK_ERROR"})(t.ErrorType||(t.ErrorType={}));(function(e){e.Browse="browse",e.Home="home",e.SharedLinkFile="sl_file",e.SharedLinkFolder="sl_folder",e.SharedLinkCollection="sl_collection",e.VersionHistory="version_history",e.FileViewer="file_viewer",e.Desktop="desktop",e.EmbeddedSharedLinkFile="embedded_sl_file",e.ArchiveFile="archive_file"})(t.PreviewSourceContext||(t.PreviewSourceContext={}));(function(e){e.Visit="visit",e.Click="click",e.FileViewerExit="file_viewer_exit"})(t.PreviewSourceAction||(t.PreviewSourceAction={}));(function(e){e.Unknown="unknown",e.NewFile="new_file",e.BeforeUnload="before_unload",e.Unmount="unmount"})(t.PreviewSessionEndReason||(t.PreviewSessionEndReason={}));(function(e){e.EnableRegionCreation="EnableRegionCreation",e.Fullscreen="Fullscreen",e.PageDown="PageDown",e.PageIndicator="PageIndicator",e.PageUp="PageUp",e.Print="Print",e.Sidebar="Sidebar",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.Esignature="Esignature",e.FlipControls="FlipControls"})(t.PreviewToolbarButtonType||(t.PreviewToolbarButtonType={}))}),define("modules/clean/react/previews/pdf_viewer/urls",["require","exports","tslib","modules/core/uri","modules/constants/file_viewer"],function(e,t,i,r,a){"use strict";function n(e,t,i,r,a){return void 0===i&&(i=0),void 0===r&&(r=50),void 0===a&&(a=!1),t&&(e=s(e,{metadata:"1"})),void 0!==i&&(e=s(e,{text:"1",page_start:""+i,page_end:""+r})),a&&(e=s(e,{canned_file_name:"spdf/audi.pdf.json"})),e}function o(e,t,i,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=!1);var n={page:t.toString()};a.SVG_PDF_PREVIEW&&i>0?n.format="svg":n.scale_percent=i.toString();var o=s(e,n);return r&&(o=s(o,{canned_file_name:"spdf/audi.pdf."+t+".png"})),o}function s(e,t){return r.URI.parse(e).updateQuery(t).toString()}function l(e){return r.URI.parse(e).getAuthority().toLocaleLowerCase().indexOf("dropbox.com")<0}Object.defineProperty(t,"__esModule",{value:!0}),a=i.__importStar(a),t.textUrl=n,t.imageUrl=o,t.updateQueryParam=s,t.skipCsrfTokenInjection=l}),define("modules/clean/react/size_class/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"})(t.SizeClass||(t.SizeClass={})),t.MEDIA_SIZE_CLASS_MEDIUM="screen and (min-width: 736px) and (max-width: 1023px)",t.MEDIA_SIZE_CLASS_LARGE="screen and (min-width: 1024px)"}),define("modules/clean/shared_link/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=pkg-previews_core.min.js-vflv1fOZs.map