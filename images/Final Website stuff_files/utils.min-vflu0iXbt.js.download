define(["require","exports","tslib","modules/clean/open_with","modules/clean/file_store/utils","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/open_button/types","modules/clean/react/file_viewer/unity/unity_utils","modules/clean/react/file_viewer/utils","modules/clean/react/paper/utils","modules/clean/react/file_viewer/data/actions","modules/core/i18n","modules/clean/react/extensions/utils","modules/clean/cloud_docs/open_with_utils"],function(e,n,t,i,r,o,s,l,u,a,p,c,f,d){"use strict";function _(e){var n=e.file,i=t.__rest(e,["file"]);return r.isBrowseFile(n)?O(t.__assign({file:n},i)):r.isSharedFile(n)?h(t.__assign({file:n},i)):[]}function h(e){for(var n=e.file,t=e.user,i=[],r=d.getOpenWithCloudEditorInfo(n,t),l=function(e){i.push({handler:function(){return e.handler(n,t)},spriteName:null,iconUrl:e.iconUrl,text:e.text,type:s.OpenButtonAction.OPEN_WITH_CLOUD_DOC,userAction:o.UserAction.OpenWithCloudDocEditor})},u=0,a=r;u<a.length;u++){l(a[u])}return i}function O(e){var n=e.file,t=e.hasOpenInPaperSupport,i=e.isUnityDisabled,r=e.isOpenWithDisabled,l=e.unityInfo,a=e.extraOptions,_=e.user,h=e.sharingServiceInfo,O=e.refreshSharingServiceInfo,N=e.showOpenWithShare,b=e.onPresentInZoom,S=e.isCloudBasedDoc;if(!l)return[];var W=[];t&&W.push({handler:D({file:n,user:_}),spriteName:"paper",text:c._("Copy to Paper"),type:s.OpenButtonAction.OPEN_IN_PAPER,userAction:o.UserAction.CopyToPaper}),!S&&y({isUnityDisabled:i,unityInfo:l})&&W.push({handler:v({file:n,user:_,isFolder:!1}),spriteName:"ow_desktop",text:U(l),type:s.OpenButtonAction.UNITY_FILE,userAction:o.UserAction.OpenInUnity});var E=u.OpenWithHelpers.getOpenWithHandlerData(n,_);A({file:n,isOpenWithDisabled:r,user:_})&&E&&W.push({handler:w({file:n,user:_}),spriteName:E.icon,text:E.name,type:s.OpenButtonAction.OPEN_WITH,userAction:o.UserAction.OpenInOfficeOnline});for(var F=d.getOpenWithCloudEditorInfo(n,_),P=function(e){W.push({handler:function(){return e.handler(n,_)},spriteName:null,iconUrl:e.iconUrl,text:e.text,type:s.OpenButtonAction.OPEN_WITH_CLOUD_DOC,userAction:o.UserAction.OpenWithCloudDocEditor})},x=0,B=F;x<B.length;x++){P(B[x])}m({isUnityDisabled:i,unityInfo:l})&&W.push({handler:v({file:n,user:_,isFolder:!0}),spriteName:"ow_folder",text:I(l),type:s.OpenButtonAction.UNITY_FOLDER,userAction:o.UserAction.OpenInUnityFolder}),a&&a.forEach(function(e){e&&W.push(e)}),W.length||W.push({handler:function(){return p.download(n)},spriteName:null,text:c._("Download"),type:s.OpenButtonAction.DOWNLOAD,userAction:o.UserAction.Download});var C=!1,g=!1;return N&&h&&(C=f.isSlackAvailable(h),g=f.isZoomAvailable(h)),C&&h&&O&&W.push({handler:function(){return f.shareInSlackFlow(_,h,O,n,"open_with_button")},spriteName:null,text:c._("Slack"),type:s.OpenButtonAction.SHARE_TO_SLACK,userAction:o.UserAction.ShareToSlack}),g&&h&&b&&O&&W.push({handler:function(){return f.presentInZoomFlow(_,h,O,n,b,"open_with_button")},spriteName:null,text:c._("Zoom"),type:s.OpenButtonAction.PRESENT_IN_ZOOM,userAction:o.UserAction.PresentInZoom}),W}function m(e){var n=e.isUnityDisabled,t=e.unityInfo;return!n&&l.UnityHelpers.isUnityFolderSupported(t)}function y(e){var n=e.isUnityDisabled,t=e.unityInfo;return!n&&l.UnityHelpers.isUnityFileSupported(t)}function A(e){var n=e.file,t=e.isOpenWithDisabled,i=e.user;return!t&&u.OpenWithHelpers.canOpenWith(n,i)}function U(e){var n=(e?e.open_application_name:void 0)||c._("Desktop");return c._("Open in %(app_name)s").format({app_name:n})}function I(e){var n=(null!==e?e.file_browser_display_name:void 0)||c._("File Browser");return c._("Show in %(file_browser)s").format({file_browser:n})}function v(e){var n=e.file,t=e.isFolder,i=e.user;return function(){l.UnityHelpers.openFile(n.ns_id,n.ns_path,i.id,t)}}function w(e){var n=e.file,t=e.user;return function(){u.OpenWithHelpers.openWith(n,t)}}function D(e){var n=e.file,t=e.user;return function(){a.openFileInPaper({file:n,user:t})}}function N(e,n){var t=e.map(function(e){return e.type}).includes(s.OpenButtonAction.UNITY_FILE),r=n&&i.default.is_adobe_app(n.open_application_identifier),o=e.map(function(e){return e.type}).includes(s.OpenButtonAction.OPEN_WITH);return t&&r||o}Object.defineProperty(n,"__esModule",{value:!0}),i=t.__importDefault(i),n.getOpenOptions=_,n.getOpenOptionsSharedFile=h,n.shouldShowCoachmark=N});
//# sourceMappingURL=utils.min.js-vflcbh_Av.map